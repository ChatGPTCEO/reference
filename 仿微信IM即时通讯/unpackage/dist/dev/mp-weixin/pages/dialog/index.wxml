<view class="dialogpage"><view class="dialogcontent" style="{{('height: '+heightincress)}}"><scroll-view class="dialogchat solid-top" scroll-y="true" scroll-into-view="{{intoviewid}}" data-event-opts="{{[['scrolltoupper',[['onScrolltoUpper',['$event']]]]]}}" bindscrolltoupper="__e"><view data-event-opts="{{[['touchstart',[['InputBule',[false]]]]]}}" class="cu-chat" bindtouchstart="__e"><block wx:for="{{data.messages}}" wx:for-item="msg" wx:for-index="index" wx:key="index"><block><block wx:if="{{msg.uid==0||msg.highmode==8}}"><view class="cu-info round" id="{{'message'+msg.id}}"><rich-text nodes="{{msg.message}}" data-event-opts="{{[['tap',[['naviTo',['$0'],[[['data.messages','',index,'url']]]]]]]}}" bindtap="__e"></rich-text></view></block><block wx:else><view id="{{'message'+msg.id}}"><msglist vue-id="{{'48c2ccc2-1-'+index}}" msgindex="{{index}}" chatevel="{{true}}" isManager="{{data.ismanager}}" userId="{{userId}}" chatimages="{{chatimages}}" dialogtype="{{type}}" chatid="{{chatid}}" message="{{msg}}" data-event-opts="{{[['^genimages',[['getChatimage']]],['^playaudio',[['doAudioPlay']]],['^dospecial',[['doSpecialAction']]],['^atuser',[['doAtUser']]],['^lotap',[['doLongPress']]]]}}" bind:genimages="__e" bind:playaudio="__e" bind:dospecial="__e" bind:atuser="__e" bind:lotap="__e" bind:__l="__l"></msglist></view></block></block></block></view></scroll-view><view class="{{['cu-bar','input','noshadow','dialogoperation',animationstyle]}}"><view data-event-opts="{{[['tap',[['recordShow']]]]}}" class="action" bindtap="__e"><text class="{{['text-grey','cuIcon-'+(record.showing?'keyboard':'sound')]}}" style="margin-right:0;"></text></view><view data-event-opts="{{[['longpress',[['recordStart',['$event']]]]]}}" class="{{['action','record','flex','padding-right-sm',record.showing?'':'hidden']}}" bindlongpress="__e"><button class="cu-btn radius bg-grey light flex-direction">暂未开放</button></view><input class="{{['solid-bottom',InputStyle,record.showing?'hidden':'']}}" adjust-position="{{true}}" auto-blur="{{true}}" hold-keyboard="{{true}}" focus="{{chatfocus}}" maxlength="-1" cursor-spacing="10" confirm-type="{{chatpostcenter?'send':''}}" data-event-opts="{{[['touchend',[['InputBule',[true]]]],['confirm',[['postchatbybtn',[1]]]],['blur',[['InputBule']]],['input',[['__set_model',['$0','message','$event',[]],['postdata']],['InputInput',['$event']]]]]}}" value="{{postdata.message}}" bindtouchend="__e" bindconfirm="__e" bindblur="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['faceShow',[true]]]]]}}" class="action" bindtap="__e"><text class="{{['text-grey','cuIcon-'+(face.showing?'keyboard':'emojifill')]}}"></text></view><block wx:if="{{postdata.message==''}}"><view data-event-opts="{{[['tap',[['toolShow']]]]}}" class="action" bindtap="__e"><text class="{{['text-grey','cuIcon-roundadd'+(toolshowing?'':'fill')]}}"></text></view></block><block wx:else><view data-event-opts="{{[['touchend',[['postchatbybtn',[1]]]]]}}" class="action" bindtouchend="__e"><button class="{{['cu-btn','radius','bg-'+theme.actcolor]}}">发送</button></view></block></view><block wx:if="{{record.recorder}}"><view class="{{['recordbar','padding','radius','bg-'+theme.actcolor]}}"><view class="flex text-center"><view class="padding-right-sm"><text class="{{['cuIcon-voicefill',record.cancel?'':'playing']}}"></text><block wx:if="{{record.cancel}}"><text>松开手取消录音</text></block><block wx:else><text>您正在说话...</text></block></view><view class="flex-sub"><button class="{{['cu-tag','light','round','bg-'+theme.actcolor]}}">上滑取消</button></view></view></view></block><view class="{{['face-contianer','bg-gray',face.showing?'':'hidden',animationstyle]}}"><view class="nav bg-white"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{['cu-item',face.currface=='normal'?'text-green cur':'']}}" bindtap="__e">经典</view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['cu-item',face.currface=='super'?'text-green cur':'']}}" bindtap="__e">超级</view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="{{['cu-item',face.currface=='myface'?'text-green cur':'']}}" bindtap="__e">我的</view></view><scroll-view class="face-faces" scroll-y="{{true}}"><block wx:if="{{face.currface=='normal'}}"><view class="face-normal face-items"><view class="grid col-8 text-center"><block wx:for="{{face.faces.normal}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['faceTochat',['face_'+item.path+'_'+item.name,false]]]]]}}" class="face-item" bindtap="__e"><image mode="aspectFill" src="{{item.pic}}"></image></view></block></view></view></block><block wx:else><block wx:if="{{face.currface=='super'}}"><view class="face-super face-items"><view class="grid col-4 padding-top"><block wx:for="{{face.faces.super}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['faceTochat',['superface_'+item,true]]]]]}}" class="face-item" bindtap="__e"><superface vue-id="{{'48c2ccc2-2-'+index}}" face="{{item}}" bind:__l="__l"></superface></view></block></view></view></block><block wx:else><view class="face-mine face-items"><view class="grid col-5 grid-square flex-sub padding-sm"><view data-event-opts="{{[['tap',[['myfaceadd']]]]}}" class="bg-white radius" bindtap="__e"><text class="cuIcon-cameraadd"></text></view><block wx:for="{{face.faces.myface}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['myfaceTochat',[index]]]],['longpress',[['myfacerm',[index]]]]]}}" class="bg-img" bindtap="__e" catchlongpress="__e"><image src="{{item.resource}}" mode="aspectFill"></image></view></block></view></view></block></block></scroll-view><block wx:if="{{face.currface=='normal'}}"><view class="face-bar flex justify-end"><button data-event-opts="{{[['tap',[['facecancel']]]]}}" class="{{['cu-btn','radius','shadow','margin-right-sm','text-lg',postdata.message==''?'bg-white':'bg-green']}}" bindtap="__e"><text class="cuIcon-backdelete"></text></button><button data-event-opts="{{[['tap',[['postchatbybtn',[0]]]]]}}" class="{{['cu-btn','radius','shadow','text-lg',postdata.message==''?'bg-white':'bg-green']}}" bindtap="__e"><text>发送</text></button></view></block></view><view class="{{['tool-contianer','bg-gray',toolshowing?'':'hidden',animationstyle]}}"><view class="padding-tb grid col-4 padding-lr-sm"><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['chooseImage']]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-picfill"></text></view><view>图片</view></view></view><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['chooseVideo']]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-videofill"></text></view><view>视频</view></view></view><block wx:if="{{data.redpack}}"><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['naviTo',['redpacket/post',['o',['cid',chatid],['type',type]]]]]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-redpacket_fill"></text></view><view>红包</view></view></view></block><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['doChooseLocation']]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-locationfill"></text></view><view>位置</view></view></view><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['naviTo',['friend/share',['o',['cid',chatid],['type',type]]]]]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-friendfill"></text></view><view>名片</view></view></view><block wx:if="{{data.transfer}}"><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['naviTo',['credit/transfer',['o',['uid',chatid]]]]]]]}}" class="radius bg-white padding-tb-sm" bindtap="__e"><view class="text-xxxl"><text class="cuIcon-sponsorfill"></text></view><view>转账</view></view></view></block><block wx:for="{{navigation.dialog}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="text-grey text-center padding-lr-sm"><view data-event-opts="{{[['tap',[['naviTo',[(item.inner==1?'':'net:')+item.url,['o',['cid',chatid],['type',type]]]]]]]}}" class="{{['radius','bg-white','padding-tb-sm',item.extra]}}" bindtap="__e"><view class="text-xxxl"><text class="{{[item.icon==''?'cuIcon-link':item.icon]}}"></text></view><view>{{item.name}}</view></view></view></block></view></view></view><block wx:if="{{data.group.id>0}}"><view class="{{['cu-modal',showmodal=='groupnotice'?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">群公告</view></view><view class="padding-xl"><scroll-view class="group-notice" scroll-y="{{true}}"><rich-text nodes="{{data.group.notice}}" selectable="{{true}}"></rich-text></scroll-view></view><view class="cu-bar bg-white justify-center"><view class="action"><button data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="{{['cu-btn','bg-'+theme.actcolor]}}" bindtap="__e">我知道了</button></view></view></view></view></block><view class="{{['popupover',showmodal=='popupover'?'active':'']}}"><view data-event-opts="{{[['touchstart',[['e4',['$event']]]]]}}" class="popupover-bg" bindtouchstart="__e"></view><view class="radius popcontainer shadow-blur" style="{{('bottom:'+chatpopup.bottom+'px;left:'+chatpopup.left+'px')}}"><view class="{{['cu-list','grid','text-white','col-'+chatpopup.colspan]}}"><block wx:if="{{platform=='h5'}}"><view class="{{['cu-item','JSClip_dialogindex',chatpopup.copy?'':'hidden']}}" data-clipboard-text="{{clipboardtext}}"><view class="cuIcon-copy"></view><text>复制</text></view></block><block wx:else><view data-event-opts="{{[['tap',[['doCopy']]]]}}" class="{{['cu-item',chatpopup.copy?'':'hidden']}}" bindtap="__e"><view class="cuIcon-copy"></view><text>复制</text></view></block><block wx:if="{{chatpopup.cancel>0}}"><view data-event-opts="{{[['tap',[['doCancel']]]]}}" class="cu-item" bindtap="__e"><view class="cuIcon-delete"></view><text>{{chatpopup.cancel==1?'撤回':'删除'}}</text></view></block><view data-event-opts="{{[['tap',[['doFavor']]]]}}" class="cu-item" bindtap="__e"><view class="cuIcon-favor"></view><text>收藏</text></view><view data-event-opts="{{[['tap',[['doShare']]]]}}" class="cu-item" bindtap="__e"><view class="cuIcon-share"></view><text>转发</text></view></view></view></view></view>