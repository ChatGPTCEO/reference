<view class="{{['cu-item','dialogitem',message.uid==userId?'self':'']}}"><block wx:if="{{message.uid!=userId}}"><view data-event-opts="{{[['longpress',[['doAt']]],['tap',[['naviTo',['member/index',['o',['uid',message.uid],['fg',message.gid],['fp',chatevel?'dialog':'favor']]]]]]]}}" class="cu-avatar radius" style="{{('background-image:url('+message.avatar+');')}}" catchlongpress="__e" bindtap="__e"></view></block><block wx:if="{{message.uid!=userId&&(message.gid>0||!chatevel)}}"><view class="nickname text-grey">{{message.nickname}}</view></block><view class="{{[message.special.type=='normal'?'highmode'+message.highmode:'special-'+message.special.type,message.special.type=='shareinfo'?'special-main':'main']}}" id="{{'msgitem'+message.id}}" data-index="{{msgindex}}" data-event-opts="{{[['longpress',[['doLongPress',['$event']]]]]}}" catchlongpress="__e"><block wx:if="{{message.special.type=='normal'}}"><block><block wx:if="{{message.status==-1}}"><view class="action text-xl"><text class="cuIcon-infofill text-orange"></text></view></block><block wx:if="{{message.highmode==4}}"><view class="content noaf nobf"><image mode="widthFix" src="{{message.message}}" data-event-opts="{{[['tap',[['viewImage',['$0'],['message.message']]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{message.highmode==2}}"><view data-event-opts="{{[['tap',[['naviTo',['player/index',['o',['vid',message.vid]]]]]]]}}" class="content chat-video noaf nobf" catchtap="__e"><view class="bg-video only-img"><image src="{{message.poster+(poster>0?'?reload='+poster:'')}}" mode="widthFix" data-event-opts="{{[['error',[['posterReload']]]]}}" binderror="__e"></image></view></view></block><block wx:else><view class="content shadow" style="{{(message.uid==userId?'background-color:'+theme.chatbg:'')}}"><block wx:if="{{message.highmode<=1}}"><view data-event-opts="{{[['tap',[['naviTo',['$0'],['message.url']]]]]}}" class="richtext" catchtap="__e"><rich-text nodes="{{message.message+''}}"></rich-text></view></block><block wx:if="{{message.highmode==5}}"><view data-event-opts="{{[['tap',[['doPlayAudio']]]]}}" class="{{['chat-audio',audiostyle[message.special.value]]}}" catchtap="__e"><block wx:if="{{message.uid!=userId}}"><text class="cuIcon-sound"></text></block><text class="chat-audio-time">{{message.yuyintime}}</text><block wx:if="{{message.uid==userId}}"><text class="cuIcon-sound self"></text></block></view></block></view></block></block></block><block wx:if="{{message.special.type=='superface'}}"><block><view class="content noaf nobf nobg"><superface vue-id="4fe27e59-1" face="{{message.special.value}}" bind:__l="__l"></superface></view></block></block><block wx:if="{{message.special.type=='transfer'}}"><block><view data-event-opts="{{[['tap',[['naviTo',['credit/index']]]]]}}" class="content chat-transfer bg-orange" bindtap="__e"><view class="flex"><view class="flex-sub"><view class="transfer-icon text-xxxl"><text class="cuIcon-order"></text></view></view><view class="flex-fives padding-left-sm"><view class="text-xxl">{{"￥"+message.special.value.amount}}</view><view class="margin-top-xs">{{message.special.value.remark||(message.uid==userId?'转账给好友':'收到好友转账')}}</view></view></view><view class="bg-white padding-lr-sm transfer-bar text-grey text-xs"><text>{{sitename+"转账"}}</text><text class="margin-left-sm">已到账</text></view></view></block></block><block wx:if="{{message.special.type=='shareinfo'}}"><block><view class="cu-list menu-avatar special-content"><view data-event-opts="{{[['tap',[['naviTo',['$0'],['message.special.value.page']]]]]}}" class="cu-item arrow" bindtap="__e"><view class="cu-avatar radius lg" style="{{('background-image:url('+message.special.value.cover+');')}}"></view><view class="content flex-sub"><view><view class="text-cut">{{message.special.value.title}}</view></view><view class="text-gray text-sm flex justify-between text-cut">{{''+message.special.value.desc+''}}</view></view></view></view></block></block><block wx:if="{{message.special.type=='redpacket'}}"><block><view data-event-opts="{{[['tap',[['doShowRedpacket']]]]}}" class="{{['content','chat-transfer','bg-orange','chat-redpacket',message.special.value.grabed?'light':'']}}" bindtap="__e"><view class="flex"><view class="flex-sub"><view class="text-xxxl text-red"><text class="cuIcon-redpacket_fill"></text></view></view><view class="flex-fives padding-left-sm"><view class="text-lg text-cut">{{message.special.value.remark}}</view></view></view><view class="padding-lr-sm transfer-bar solid-top text-xs"><text>{{sitename+"红包"}}</text><block wx:if="{{message.special.value.grabed}}"><text class="margin-left-sm">已领取</text></block></view></view></block></block><block wx:if="{{message.special.type=='location'}}"><block><view data-event-opts="{{[['tap',[['doOpenLocation']]]]}}" class="content chat-location bg-white radius" bindtap="__e"><view class="padding-sm"><view class="text-cut text-lg text-boldm">{{message.special.value.name}}</view><view class="text-sm text-gray margin-top-xs text-cut">{{message.special.value.address}}</view></view><view class="bg-image"><image src="{{message.special.value.cover}}" mode="widthFix"></image></view></view></block></block></view><block wx:if="{{message.uid==userId}}"><view data-event-opts="{{[['tap',[['naviTo',['member/index',['o',['uid',message.uid]]]]]]]}}" class="cu-avatar radius" style="{{('background-image:url('+message.avatar+');')}}" bindtap="__e"></view></block><view class="date">{{message.datetime}}</view></view>