

<h1 align="center">HasChat</h1>

<h5 align="center">åŸºäºuni-app+socket.ioçš„èŠå¤©åº”ç”¨</h5>
<div align="center">

[![star](https://gitee.com/howcode/has-chat-app/badge/star.svg)](https://gitee.com/howcode/has-chat-app) Â [![fork](https://gitee.com/howcode/has-chat-app/badge/fork.svg)](https://gitee.com/howcode/has-chat-app) Â [![](https://img.shields.io/badge/QQç¾¤-149091283-red)](https://jq.qq.com/?_wv=1027&k=XivFMfBQ)


```shell
æ— å¿å¼€æºï¼ä½ ä»¬çš„Staræ˜¯æˆ‘çš„åŠ¨åŠ›ï¼
```

------------------------------------------------------------------------
</div>

# ä»‹ç»
è‡ªæˆ‘åšçš„å®¢æœèŠå¤©ä»¥æ¥ï¼Œè®©æˆ‘åšä¸€å¥—èŠå¤©åº”ç”¨çš„å‘¼å£°è¶Šæ¥è¶Šå¤šï¼ŒåŠ ä¸Šé‚£å¥—å®¢æœèŠå¤©ç”±äºæ²¡æœ‰ç»„ä»¶åŒ–ã€UIè®¾è®¡ç­‰é—®é¢˜ï¼Œä¹Ÿè®©æˆ‘ä¸€ç›´å¿ƒæœ‰é—æ†¾åšçš„ä¸å¤Ÿå®Œç¾ï¼Œäºæ˜¯åˆ©ç”¨ç©ºä½™æ—¶é—´åšäº†ä¸€å¥—ç›¸å¯¹å®Œæ•´çš„èŠå¤©åº”ç”¨ã€‚HasChat æ˜¯ä¸€å¥—ä½¿ç”¨å…¨æ–°æŠ€æœ¯å®Œæˆçš„é€šè®¯èŠå¤©ç½‘é¡µã€‚

- [PCç½‘é¡µç‰ˆå‰ç«¯ï¼šVue3 + Vite + TypeScript + Naive UI + Socket.io](https://gitee.com/howcode/has-chat)
- [ç§»åŠ¨ç‰ˆå‰ç«¯ï¼šuni-app + Socket.io](https://gitee.com/howcode/has-chat-app)
- [åç«¯ï¼šExpress.js](https://gitee.com/howcode/has-chat-service)

ä½œè€…å¼€æºç›®çš„æ—¨åœ¨ç»™åˆšå­¦ä¹ è¯¥é¢†åŸŸçš„æ–°äººä¸€äº›å¼•è·¯ï¼Œä¸ç®¡ä½ æ˜¯å‰ç«¯è¿˜æ˜¯åç«¯ï¼Œéƒ½èƒ½å¯¹ä½ åœ¨é€šè®¯èŠå¤©è¿™ä¸ªé¢†åŸŸæœ‰ä¸€ç‚¹ç‚¹çš„å¯å‘ã€‚
# é¢„è§ˆå›¾
![PCç«¯](https://img-blog.csdnimg.cn/ef64ea7a09484131b1570e3c3c086fbd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

![PCç«¯](https://img-blog.csdnimg.cn/f74d114a4b21465b9a02997aacce1edc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

![ç§»åŠ¨ç«¯](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-e9420bcd-26cd-4faf-b47a-9949982f7c41/f2b01df3-748e-4a20-9252-abd1fdf80ee7.jpg)
# åœ¨çº¿é¢„è§ˆ
[haschat-PCç«¯](https://howcode.online/haschat)

[haschat-ç§»åŠ¨ç«¯](https://howcode.online/haschatapp)
# åŠŸèƒ½ä¸€è§ˆ
- ç™»é™†ã€éšæœºè·å–ç”¨æˆ·ç™»é™†
- å‘é€é‚®ç®±éªŒè¯ç æ³¨å†Œ
- å‘é€è¡¨æƒ…+æ–‡å­—ç»„åˆçš„å¯Œæ–‡æœ¬å†…å®¹
- å‘é€å›¾ç‰‡å†…å®¹ï¼ŒæŸ¥çœ‹å¤§å›¾
- enterå‘é€ä¿¡æ¯ï¼Œenter+ctrlæ¢è¡Œè¾“å…¥å†…å®¹
- æ¶ˆæ¯æé†’
- æœªè¯»æ¶ˆæ¯æ ‡è®°
- è®°å½•å†å²ä¼šè¯
- è®°å½•å†å²èŠå¤©å†…å®¹
- åˆ‡æ¢ä¸»é¢˜
- å‘é€è§†é¢‘
- å‘é€è¯­éŸ³ï¼ˆä»…ç§»åŠ¨ç«¯å…·å¤‡ï¼‰
# ç‰ˆæœ¬è¯´æ˜
- å‰ç«¯ï¼šæš‚æ— ç‰ˆæœ¬åŒºåˆ«
- åç«¯ï¼šåˆ†ä¸ºmysqlç‰ˆæœ¬ï¼ˆåˆ†æ”¯mainï¼‰å’Œjsonç‰ˆæœ¬ï¼ˆåˆ†æ”¯masterï¼‰ï¼›jsonç‰ˆæœ¬ä¸»è¦æ˜¯ä¸ºäº†ä¸æ‡‚mysqlçš„æ–°æ‰‹å­¦ä¹ ï¼›
# ç¯å¢ƒéƒ¨ç½²
```javascript
Node.Js >= 12.0.0
Mysql >= 5.7.0 (ä»…mysqlç‰ˆæœ¬éœ€è¦ï¼Œä½†æ‰§è¡Œmysqlæ–‡ä»¶éœ€è¦8.0ä»¥ä¸Šç‰ˆæœ¬)
```
## ä¸‹è½½é¡¹ç›®
å‰ç«¯

```javascript
https://gitee.com/howcode/has-chat.git
```
åç«¯ mysqlç‰ˆæœ¬
```javascript
git clone -b main https://gitee.com/howcode/has-chat-service.git
```
åç«¯ jsonç‰ˆæœ¬
```javascript
git clone -b master https://gitee.com/howcode/has-chat-service.git
```
## å¯åŠ¨é¡¹ç›®
### å®‰è£…ä¾èµ–
å‰ã€åç«¯
```javascript
npm install
```
### mysqlé…ç½®ï¼ˆjsonç‰ˆæœ¬è·³è¿‡ï¼‰
- åœ¨mysqlçš„ç‰ˆæœ¬ä¸­ï¼Œæ‰¾åˆ°ç›®å½•storeä¸‹çš„sqlæ–‡ä»¶ï¼Œè¿è¡Œsqlæ–‡ä»¶
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/4cbe505a6cd344c5933359c36192c223.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_14,color_FFFFFF,t_70,g_se,x_16)![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/253ce4de33f84648a6d769041d8227d1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_17,color_FFFFFF,t_70,g_se,x_16)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/c794583d2e7f41fc90447c57b0234057.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_20,color_FFFFFF,t_70,g_se,x_16)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/b02d0124c0624466982203208ddbaa03.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_17,color_FFFFFF,t_70,g_se,x_16)
- ä¾æ¬¡è¿è¡Œä¸¤ä¸ªsqlæ–‡ä»¶ï¼Œå¹¶ä¸”åˆ·æ–°æ•°æ®åº“è¡¨å°±å¯çœ‹åˆ°äº†
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/5d325c9a9b1b424ba8d57a04a3f8edc1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaG93Y29kZXI=,size_17,color_FFFFFF,t_70,g_se,x_16)
- æ‰¾åˆ°config.jsæ–‡ä»¶

```javascript
const db = mysql.createConnection({
  host: "", // ä¸»æœºåœ°å€ ï¼ˆé»˜è®¤ï¼šlocalhostï¼‰
  user: "", // ç”¨æˆ·å
  password: "", // å¯†ç 
  database: "" // æ•°æ®åº“
})
```
æ›´å¤šé…ç½®æŸ¥çœ‹ï¼š[nodejs-mysql](https://www.runoob.com/nodejs/nodejs-mysql.html)
### é‚®ç®±é…ç½®ï¼ˆjsonç‰ˆæœ¬è·³è¿‡ï¼‰
- æ‰¾åˆ°config.jsæ–‡ä»¶
```javascript
emailConfig: { //é‚®ç®±é…ç½®
    host: "smtp.qq.com",//é‚®ç®±æœåŠ¡å™¨  è¿™é‡Œæˆ‘ç”¨çš„QQé‚®ç®±
    port: 465,//é‚®ç®±ä½¿ç”¨ç«¯å£
    secure: true,//æ˜¯å¦ä½¿ç”¨é»˜è®¤çš„465ç«¯å£
    auth: {
      user: "", // å‘é€æ–¹é‚®ç®±åœ°å€
      pass: "" // smtp éªŒè¯ç 
    }
  }
```
è¯¦æƒ…ä½¿ç”¨å¯ä»¥æŸ¥çœ‹è¯¥æ–‡ç« ï¼š[nodejså‘é€é‚®ç®±ä¿¡æ¯](https://www.cnblogs.com/kusaki/p/11801769.html)
### å¯åŠ¨é¡¹ç›®/æœåŠ¡
- åç«¯
 ```javascript
node app.js
```
- å‰ç«¯
```javascript
npm run dev
```
*åˆ°æ­¤ï¼Œé¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œ*

# æ•™ç¨‹
[æœ¬åœ°æ„å»ºHasChaté¡¹ç›®](https://www.bilibili.com/video/bv1iY411K7La)

# é¡¹ç›®ç›®å½•

```javascript
haschat     
â”œâ”€â”€ src            
â”‚       â””â”€â”€ api                    		  // æ¥å£æ–‡ä»¶
â”‚       â””â”€â”€ assets						  // èµ„æºæ–‡ä»¶
â”‚			â””â”€â”€ css					 	  // cssæ ·å¼
â”‚			â””â”€â”€ emo					 	  // è¡¨æƒ…åŒ…
â”‚			â””â”€â”€ icon					  // å­—ä½“å›¾æ ‡
â”‚			â””â”€â”€ img					 	  // å›¾ç‰‡èµ„æº
â”‚			â””â”€â”€ mp3					 	  // æ¶ˆæ¯æç¤ºéŸ³é¢‘
â”‚       â””â”€â”€ class                      	  // ç±»æ–‡ä»¶
â”‚       â””â”€â”€ components                    // ç»„ä»¶
â”‚			â””â”€â”€ ChatContent.vue			  // èŠå¤©çª—å£
â”‚			â””â”€â”€ ChatDomain.vue			  // åŠŸèƒ½ç»„ä»¶
â”‚			â””â”€â”€ ChatEditor.vue			  // èŠå¤©è¾“å…¥æ¡†
â”‚			â””â”€â”€ ChatFoot.vue			  // èŠå¤©æ¡†åº•éƒ¨
â”‚			â””â”€â”€ ChatHead.vue			  // èŠå¤©å¤´éƒ¨
â”‚			â””â”€â”€ ChatNav.vue				  // èœå•æ 
â”‚			â””â”€â”€ HasChat.vue				  // èŠå¤©å…¥å£
â”‚       â””â”€â”€ enums                         // é€šç”¨æšä¸¾
â”‚       â””â”€â”€ json                          // JSONæ•°æ®å¤„ç†
â”‚       â””â”€â”€ router                        // è·¯ç”±
â”‚       â””â”€â”€ store                         // æ•°æ®ä»“åº“
â”‚       â””â”€â”€ utils                         // å·¥å…·
â”‚       â””â”€â”€ views                         // é¡µé¢
```

# ç±»æ–‡ä»¶
## User
| å­—æ®µ               | ç±»å‹      | æè¿°             |
| ------------------ | --------- | ---------------- |
| Id                 | number    | ç”¨æˆ·Id           |
| Name               | string    | ç”¨æˆ·å§“å         |
| NickName           | string    | ç”¨æˆ·æ˜µç§°         |
| OnlineState        | boolean   | åœ¨çº¿çŠ¶æ€         |
| Mobile             | string    | ç”¨æˆ·æ‰‹æœºå·       |
| Avatar             | string    | ç”¨æˆ·å¤´åƒ         |
## Conversition
| å­—æ®µ               | ç±»å‹      | æè¿°              |
| ------------------ | --------- | ----------------  |
| Id                 | number    | å†…å®¹Id            |
| SendId             | number    | å‘é€äººId          |
| ReciverId          | number    | æ¥å—äººId          |
| Content            | string    | å†…å®¹              |
| Type               | number    | ç±»å‹              |
| State              | number    | å‘é€çŠ¶æ€          |
| NoCode             | string    | ä¿¡æ¯ç¼–å·          |
| CreateDateUtc      | string    | åˆ›å»ºæ—¶é—´          |
| Title              | string    | æ‹“å±•åŠŸèƒ½å­—æ®µ      |
| Description        | string    | æ‹“å±•åŠŸèƒ½å­—æ®µ      |
| Label              | string    | æ‹“å±•åŠŸèƒ½å­—æ®µ      |
| Thumbnail          | string    | æ‹“å±•åŠŸèƒ½å­—æ®µ      |
| ReadFlag           | boolean   | æ˜¯å¦é˜…è¯»          |
| Avatar             | string    | å‘é€è€…ç”¨æˆ·å¤´åƒ    |

# è¯·æ±‚api
## 1.è·å–ç”¨æˆ·ä¿¡æ¯
**å‚æ•°**

`id`ï¼šç”¨æˆ·Idï¼Œå¿…ä¼ 

**æ¥å£åœ°å€** : /api/getUserById
## 2.è·å–ç”¨æˆ·åˆ—è¡¨
**å‚æ•°**

`id`ï¼šé™¤å»çš„ç”¨æˆ·Idï¼Œå¿…ä¼ 

**æ¥å£åœ°å€** : /api/userList
## 3.éšæœºè·å–ä¸€æ¡ç”¨æˆ·æ•°æ®
**å‚æ•°**

æ— 

**æ¥å£åœ°å€** : /api/getRandomUser
## 4.ç™»é™†
**å‚æ•°**

`email`ï¼šè´¦æˆ·ï¼Œå¿…ä¼ 

`password`ï¼šå¯†ç ï¼Œå¿…ä¼ 

**æ¥å£åœ°å€** : /api/login
## 5.æ³¨å†Œ
**å‚æ•°**

`email`ï¼šé‚®ç®±ï¼Œå¿…ä¼ 

`name`ï¼šç”¨æˆ·åï¼Œå¿…ä¼ 

`password`ï¼šå¯†ç ï¼Œå¿…ä¼ 

`surePassword`ï¼šç¡®è®¤å¯†ç ï¼Œå¿…ä¼ 

**æ¥å£åœ°å€** : /api/register
## 6.å‘é€é‚®ç®±éªŒè¯ç 
**å‚æ•°**

`email`ï¼šé‚®ç®±ï¼Œå¿…ä¼ 

`timestamp`ï¼šæ—¶é—´æˆ³ï¼Œè‡ªåŠ¨æºå¸¦

**æ¥å£åœ°å€** : /api/sendVerificationCode
## 7.æ ¡éªŒé‚®ç®±éªŒè¯ç 
**å‚æ•°**

`verificationCode`ï¼šéªŒè¯ç ï¼Œå¿…ä¼ 

`timestamp`ï¼šæ—¶é—´æˆ³ï¼Œè‡ªåŠ¨æºå¸¦

**æ¥å£åœ°å€** : /api/checkVerificationCode

# socket.ioçš„api
## 1.åŠ å…¥èŠå¤©
**å‚æ•°**

`SendId`ï¼šå‘é€è€…Idï¼Œå¿…ä¼ 

`NoCode`ï¼šæ—¶é—´æˆ³ï¼Œè‡ªåŠ¨æºå¸¦

**è°ƒç”¨æ–¹å¼**
```javascript
store.state.socket.emit("joinChat", {
  SendId: xxx,
  NoCode: xxx,
});
```
## 2.å‘é€æ¶ˆæ¯
**å‚æ•°**

`Conversition`ï¼šå‘é€å†…å®¹å¯¹è±¡ï¼ˆæŸ¥çœ‹Conversitionç±»ï¼‰ï¼Œå¿…ä¼ 

`ReciverId`ï¼šæ¥æ”¶è€…Idï¼Œå¿…ä¼ 

`SendId`ï¼šå‘é€è€…Idï¼Œå¿…ä¼ 

**è°ƒç”¨æ–¹å¼**
```javascript
store.state.socket.emit("sendMsg", {
  Conversition: xxx,
  ReciverId: xxx,
  SendId: xxx,
});
```
## 3.ä¿®æ”¹ä¿¡æ¯é˜…è¯»çŠ¶æ€
**å‚æ•°**

`ReciverId`ï¼šæ¥æ”¶è€…Idï¼Œå¿…ä¼ 

`SendId`ï¼šå‘é€è€…Idï¼Œå¿…ä¼ 

**è°ƒç”¨æ–¹å¼**
```javascript
store.state.socket.emit("changeMsgRead", {
  ReciverId: xxx,
  SendId: xxx,
});
```
## 4.æ–°å¢å†å²ä¼šè¯
**å‚æ•°**

`SendId`ï¼šå‘é€è€…Idï¼Œå¿…ä¼ 

`Revicer`ï¼šæ¥å—è€…å¯¹è±¡ï¼ˆå¯æŸ¥çœ‹Useç±»ï¼‰ï¼Œå¿…ä¼ 

**è°ƒç”¨æ–¹å¼**
```javascript
store.state.socket.emit("insertHistorySession", {
  SendId: xxx,
  Revicer: xxx,
});
```
# å…è´£å£°æ˜
ä¸€ã€æœ¬é¡¹ç›®å®—æ—¨åœ¨äºä¸ºå¹¿å¤§çš„æ­£åœ¨å­¦ä¹ é€šè®¯æ–¹é¢çš„æ–°æ‰‹æä¾›å­¦ä¹ ã€æ€è·¯

äºŒã€æœ¬é¡¹ç›®èµ„æºå…¨éƒ¨å…è´¹åˆ†äº«ï¼ŒåŒ…æ‹¬å‰ç«¯æºç ã€åç«¯è½¬æºç ç­‰ã€‚æœ¬é¡¹ç›®ä¸ä¼šåˆ©ç”¨ä»»ä½•èµ„æºè¿›è¡Œä»»ä½•çš„é”€å”®ç›ˆåˆ©æ´»åŠ¨ã€‚

ä¸‰ã€ä»»ä½•æƒ…å†µä¸‹ï¼Œå› ä½¿ç”¨æœ¬é¡¹ç›®è¿›è¡Œè¿æ³•çŠ¯ç½ªçš„è¡Œä¸ºï¼Œæœ¬äººä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹è´£ä»»ã€‚
# æœªæ¥è®¡åˆ’

- å‘é€å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä»¥srcè·¯å¾„å½¢å¼è·å–
- å‘é€è§†é¢‘åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
- ç¾¤èŠåŠŸèƒ½
- å‘é€è¯­éŸ³åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
- uni-appå¼€å‘æ··åˆapp/h5/å°ç¨‹åºç‰ˆæœ¬ï¼ˆå·²å®Œæˆï¼‰

## ğŸ˜Š æåŠ©ä½œè€…

<table>
	<tr>
		<td><img src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-e9420bcd-26cd-4faf-b47a-9949982f7c41/6b8532a9-46a0-4f1a-a0df-4ecc89498490.jpg" width="220"/></td>
		<td><img src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-e9420bcd-26cd-4faf-b47a-9949982f7c41/6dc29fd6-0a13-4858-ab62-85da29642b46.jpg" width="220" /></td>
	</tr>
</table>
<code>ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ æ‚¨çš„æåŠ©å’Œèµèµï¼Œå°†ä¼šæ˜¯ä½œè€…howcodeæ›´å¥½çš„ç»´æŠ¤åŠ¨åŠ›ï¼</code>