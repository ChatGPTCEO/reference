{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/share.vue?04a3","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/share.vue?f0ca","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/share.vue?365f","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/share.vue?9a4e","uni-app:///pages/dialog/share.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,8F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AAC6L;AAC7L,gBAAgB,2LAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAouB,CAAgB,qrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsFxvB;AACA,uF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA,EACA,IADA,kBACA,CACA,SACA,MADA,EAEA,0BAFA,EAGA,yBAHA,EAIA,iBAJA,EAKA,YALA,EAMA,YANA,EAOA,WACA,aADA,EAEA,yBAFA,EAGA,WAHA,EAIA,SAJA,EAKA,SALA,EAMA,aANA,EAPA,EAeA,QACA,eADA,EAEA,aAFA,EAGA,iBAHA,EAIA,WAJA,EAKA,WALA,EAMA,UANA,EAfA,GAwBA,CA1BA,EA2BA,MA3BA,kBA2BA,OA3BA,EA2BA,CACA,qGACA,iCACA,iEACA,iDACA,CAhCA,EAiCA,MAjCA,oBAiCA,CAEA,CAnCA,EAoCA,QApCA,sBAoCA,CACA,6CACA,2EACA,CACA,CAxCA,EAyCA,WACA,QADA,oBACA,KADA,EACA,4KACA,gBACA,yCACA,0EACA,uCACA,CACA,gBACA,4BACA,gBADA,IAGA,eACA,cACA,CACA,CAXA,EAWA,IAXA,EAYA,CAfA,EAgBA,MAhBA,kBAgBA,IAhBA,EAgBA,mFACA,wCACA,CAlBA,EAmBA,UAnBA,wBAmBA,CACA,wBACA,2DACA,mDACA,gBACA,wBACA,oBACA,2BACA,CAHA,EAGA,GAHA,EAIA,CACA,CA7BA,EA8BA,OA9BA,qBA8BA,+UACA,gBACA,iDACA,+EACA,mDACA,4DADA,CAEA;AACA,uDACA,qCACA,gGACA,CACA,gDACA,CARA,EAQA,uCARA,EASA,CAVA;AAWA,KA5CA;AA6CA,gBA7CA,0BA6CA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KArDA;AAsDA;AACA,SAvDA,iBAuDA,CAvDA,EAuDA;AACA;AACA,qCADA;AAEA,iBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlEA;AAmEA,UAnEA,kBAmEA,CAnEA,EAmEA;AACA;AACA;AACA,KAtEA;AAuEA,UAvEA,kBAuEA,CAvEA,EAuEA;AACA;AACA;AACA,KA1EA;AA2EA;AACA,UA5EA,oBA4EA;AACA;AACA,KA9EA;;AAgFA;AACA,QAjFA,kBAiFA;AACA;AACA;AACA,KApFA,EAzCA,E","file":"pages/dialog/share.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/dialog/share.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./share.vue?vue&type=template&id=0dfd2551&\"\nvar renderjs\nimport script from \"./share.vue?vue&type=script&lang=js&\"\nexport * from \"./share.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/dialog/share.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=template&id=0dfd2551&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.curview = \"dialog\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.curview = \"group\"\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<cu-custom :isBack=\"true\">\r\n\t\t\t<block slot=\"backText\">返回</block>\r\n\t\t\t<block slot=\"content\">{{data.title}}</block>\r\n\t\t</cu-custom>\r\n\t\t<view class=\"bg-white nav\">\r\n\t\t\t<view class=\"flex text-center\">\r\n\t\t\t\t<view class=\"cu-item flex-sub\" :class=\"curview=='dialog'?'cur text-'+theme.actcolor:''\" @tap=\"curview='dialog'\">\r\n\t\t\t\t\t最近\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item flex-sub\" :class=\"curview=='friend'?'cur text-'+theme.actcolor:''\" @tap=\"viewfriend()\">\r\n\t\t\t\t\t联系人\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item flex-sub\" :class=\"curview=='group'?'cur text-'+theme.actcolor:''\" @tap=\"curview='group'\">\r\n\t\t\t\t\t群聊\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"listcontent indexes solid-top\">\r\n\t\t\t<view :class=\"curview=='dialog'?'':'hidden'\">\r\n\t\t\t\t<view class=\"text-empty\" v-if=\"data.dialogs.length==0\">\r\n\t\t\t\t\t<text v-if=\"data.inited\">{{text.text_empty}}</text>\r\n\t\t\t\t\t<text v-else class=\"cu-load load-cuIcon loading\">聊天会话加载中...</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-list menu-avatar no-padding\" v-else>\r\n\t\t\t\t\t<view class=\"cu-item\" @click=\"doShare(item.cid,item.type,item.title,item.avatar)\" v-for=\"(item, index) in data.dialogs\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"cu-avatar round\" :style=\"'background-image:url('+item.avatar+');'\">\r\n\t\t\t\t\t\t\t<view class=\"cu-tag badge cuIcon-group\" :class=\"'bg-'+theme.actcolor\" v-if=\"item.type=='group'\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t<view><view class=\"text-cut text-lg\">{{item.title}}</view></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view :class=\"curview=='friend'?'':'hidden'\">\r\n\t\t\t\t<view class=\"text-empty\" v-if=\"data.friends.length==0\">\r\n\t\t\t\t\t<text v-if=\"data.inited\">{{text.text_empty}}</text>\r\n\t\t\t\t\t<text v-else class=\"cu-load load-cuIcon loading\">好友加载中...</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else>\r\n\t\t\t\t\t<scroll-view scroll-y class=\"indexes\" :scroll-into-view=\"'indexes-'+ indexes.listCurID\" :style=\"[{height:'calc(100vh - '+ CustomBar + 'px - 50px)'}]\" :scroll-with-animation=\"true\" :enable-back-to-top=\"true\">\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in data.friends\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view :class=\"'indexItem-' + item.letter\" :id=\"'indexes-' + item.letter\" :data-index=\"item.letter\">\r\n\t\t\t\t\t\t\t\t<view class=\"padding-sm\">{{item.letter}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"cu-list menu-avatar no-padding\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"cu-item\" @click=\"doShare(value.fuid,'normal',value.remark,value.avatar)\" v-for=\"(value,key) in item.list\" :key=\"key\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"cu-avatar round\" :style=\"'background-image:url('+value.avatar+');'\"></view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view><view class=\"text-cut text-lg\">{{value.remark}}</view></view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<view class=\"indexBar\" :style=\"[{height:'calc(100vh - ' + indexes.CustomBar + 'px - 165px)'}]\">\r\n\t\t\t\t\t\t<view class=\"indexBar-box\" @touchstart=\"tStart\" @touchend=\"tEnd\" @touchmove.stop=\"tMove\">\r\n\t\t\t\t\t\t\t<view class=\"indexBar-item\" v-for=\"(item,index) in data.friends\" :key=\"index\" :id=\"index\" @touchstart=\"getCur\" @touchend=\"setCur\"> {{item.letter}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-show=\"!hidden\" class=\"indexToast\">\r\n\t\t\t\t\t\t{{indexes.listCur}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view :class=\"curview=='group'?'':'hidden'\">\r\n\t\t\t\t<view class=\"text-empty\" v-if=\"data.groups.length==0\">\r\n\t\t\t\t\t<text v-if=\"data.inited\">{{text.text_empty}}</text>\r\n\t\t\t\t\t<text v-else class=\"cu-load load-cuIcon loading\">群组正在加载中...</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-list menu-avatar no-padding\" v-else>\r\n\t\t\t\t\t<view class=\"cu-item\" @click=\"doShare(item.id,'group',item.name,item.pic)\" v-for=\"(item, index) in data.groups\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"cu-avatar round\" :style=\"'background-image:url('+item.pic+');'\"></view>\r\n\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t<view><view class=\"text-cut text-lg\">{{item.name}}</view></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport core from \"@/core.js\"\r\n\timport swasocket from \"@/swasocket.js\"\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmid:0,\r\n\t\t\t\ttheme:core.style,\r\n\t\t\t\ttext:core.langs,\r\n\t\t\t\tcurview:'dialog',\r\n\t\t\t\tfrompage:'',\r\n\t\t\t\thidden:true,\r\n\t\t\t\tindexes:{\r\n\t\t\t\t\tlistCurID:'',\r\n\t\t\t\t\tCustomBar:this.CustomBar,\r\n\t\t\t\t\tlistCur:'',\r\n\t\t\t\t\tboxTop:0,\r\n\t\t\t\t\tbarTop:0,\r\n\t\t\t\t\tinited:false\r\n\t\t\t\t},\r\n\t\t\t\tdata:{\r\n\t\t\t\t\ttitle:\"分享到...\",\r\n\t\t\t\t\tinited:false,\r\n\t\t\t\t\tsimplecontent:'',\r\n\t\t\t\t\tdialogs:[],\r\n\t\t\t\t\tfriends:[],\r\n\t\t\t\t\tgroups:[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tif(typeof(options.mid)=='undefined' || !options.mid) return core.toast('无效的消息内容','back');\r\n\t\t\tthis.mid = parseInt(options.mid);\r\n\t\t\tif(typeof(options.fp)!='undefined') this.frompage = options.fp;\r\n\t\t\tthis.initData('dialog/share',{mid:this.mid});\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tif(this.frompage=='web' && this.mid>0){\r\n\t\t\t\tcore.get('dialog/clearmsg',function(res){},{mid:this.mid});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinitData(route, data={}, callback=false){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tcore.get(route,function(res){\r\n\t\t\t\t\tif(typeof(res.message)!='undefined' && typeof(res.type)!='undefined'){\r\n\t\t\t\t\t\treturn core.report(res, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.data = res;\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle:res.title\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(callback){\r\n\t\t\t\t\t\tcallback(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t},data);\r\n\t\t\t},\r\n\t\t\tnaviTo(page,data={}){\r\n\t\t\t\treturn core.navito(page,data);\r\n\t\t\t},\r\n\t\t\tviewfriend(){\r\n\t\t\t\tthis.curview = 'friend';\r\n\t\t\t\tif(this.data.friends.length>0 && !this.indexes.inited){\r\n\t\t\t\t\tthis.indexes.listCur = this.data.friends[0].letter;\r\n\t\t\t\t\tlet self = this;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tself.indexesReady();\r\n\t\t\t\t\t\tself.indexes.inited = true;\r\n\t\t\t\t\t},100);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdoShare(cid=0,type='normal',nick='',avatar=''){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet title = type=='normal' ? '转发消息给' : '转发消息到';\r\n\t\t\t\tcore.confirm(this.data.simplecontent+'',title+nick,function(){\r\n\t\t\t\t\tcore.post('dialog/share',function(res){\r\n\t\t\t\t\t\tif(res.type!='success') return core.report(res);\r\n\t\t\t\t\t\t//处理首页消息显示\r\n\t\t\t\t\t\tlet postevent = swasocket.PostEvent;\r\n\t\t\t\t\t\tif(typeof(postevent)=='function'){\r\n\t\t\t\t\t\t\tpostevent({cid:cid,avatar:avatar,title:nick,type:type,spct:self.data.simplecontent});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcore.toast('转发成功！','back','success');\r\n\t\t\t\t\t},{mid:self.mid,cid:cid,type:type})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tindexesReady(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.createSelectorQuery().select('.indexBar-box').boundingClientRect(function(res) {\r\n\t\t\t\t\tthat.indexes.boxTop = res.top\r\n\t\t\t\t}).exec();\r\n\t\t\t\tuni.createSelectorQuery().select('.indexes').boundingClientRect(function(res) {\r\n\t\t\t\t\tthat.indexes.barTop = res.top\r\n\t\t\t\t}).exec();\r\n\t\t\t},\r\n\t\t\t//滑动选择Item\r\n\t\t\ttMove(e) {\r\n\t\t\t\tlet y = e.touches[0].clientY,\r\n\t\t\t\t\toffsettop = this.indexes.boxTop,\r\n\t\t\t\t\tthat = this;\r\n\t\t\t\t//判断选择区域,只有在选择区才会生效\r\n\t\t\t\tif (y > offsettop) {\r\n\t\t\t\t\tlet num = parseInt((y - offsettop) / 20);\r\n\t\t\t\t\tif(num<that.data.friends.length){\r\n\t\t\t\t\t\tthis.indexes.listCur = that.data.friends[num].letter;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgetCur(e) {\r\n\t\t\t\tthis.hidden = false;\r\n\t\t\t\tthis.indexes.listCur = this.data.friends[e.target.id].letter;\r\n\t\t\t},\r\n\t\t\tsetCur(e) {\r\n\t\t\t\tthis.hidden = true;\r\n\t\t\t\tthis.indexes.listCur = this.indexes.listCur\r\n\t\t\t},\r\n\t\t\t//触发全部开始选择\r\n\t\t\ttStart() {\r\n\t\t\t\tthis.hidden = false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//触发结束选择\r\n\t\t\ttEnd() {\r\n\t\t\t\tthis.hidden = true;\r\n\t\t\t\tthis.indexes.listCurID = this.indexes.listCur\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":""}