{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?8863","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?5b8b","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?ccff","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?bd3e","uni-app:///pages/chat/customer-service.vue","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?07c9","webpack:///C:/Users/will/Documents/GitHub/reference/单聊 群聊 发文字 发表情 发语音 发图片colorUI-IM示例/pages/chat/customer-service.vue?9fa6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/chat/customer-service.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chat/customer-service.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./customer-service.vue?vue&type=template&id=18530c74&\"\nvar renderjs\nimport script from \"./customer-service.vue?vue&type=script&lang=js&\"\nexport * from \"./customer-service.vue?vue&type=script&lang=js&\"\nimport style0 from \"./customer-service.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/customer-service.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customer-service.vue?vue&type=template&id=18530c74&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customer-service.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customer-service.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"\">\n\t\t\n\t\t<view  class=\"DrawerPage\" style=\"\" :class=\"(modalName=='viewModal'||modalName=='viewModalGroupAdd')?'show':''\">\n\t\t\t<cu-custom bgColor=\"bg-gradual-pink\"  ><block slot=\"content\">{{title}}</block> <block slot=\"right\">\n\t\t\t\t<view class=\"action\">\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action\">\n\t\t\t\t\t<text class=\"cuIcon-more\" @tap=\"showModal\" data-target=\"viewModal\"></text>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t</cu-custom>\n\t\t\t\n\t\t\t<!-- 聊天记录-->\n\t\t\t\t<view class=\"\">\n\t\t\t\t\t<chat-list :current_messages=\"current_messages\"  :is_pop_up=\"modalName=='bottomModal'\"></chat-list>\n\t\t\t\t</view>\n\t\t\t<!-- 聊天记录-->\n\t\t\t\n\n\t\t\t\n\t\t\t<view class=\"\" style=\"display: none;\">\n\t\t\t\t{{current_to.id}}\n\t\t\t</view>\n\t\t\t<!-- 聊天框 -->\n\t\t\t\n\t\t\t<view ref=\"input\" class=\"cu-bar foot input\" style=\"z-index: 9999;\" @tap.stop=\"\" :style=\"[{bottom:InputBottom*2+'rpx'}]\">\n\t\t\t\t<view class=\"action\" @tap=\"recOpen()\" v-if=\"!rec_open\">\n\t\t\t\t\t<text class=\"cuIcon-sound text-grey\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action text-black\"  @tap=\"recCancel()\" v-if=\"rec_open\">\n\t\t\t\t\t 取消\n\t\t\t\t</view>\n\t\t\t\t<input @tap=\"recStart()\" v-if=\"rec_open\" class=\"solid-bottom\" disabled=\"true\" :placeholder=\"audio_plachodler\" placeholder-style=\"text-align:center\">\n\t\t\t\t<textarea auto-height=\"true\" :show-confirm-bar=\"false\" style=\"\"  v-if=\"!rec_open\"  class=\"text-black solid-bottom\" :adjust-position=\"false\" :focus=\"focus\" maxlength=\"300\" cursor-spacing=\"10\"\n\t\t\t\t @focus=\"InputFocus\" @blur=\"InputBlur\" v-model=\"content\"   placeholder-style=\"height: 64upx;line-height: 64upx\" placeholder=\"请输入内容\">\n\t\t\t\t\n\t\t\t\t </textarea>\n\t\t\t\t\n\t\t\t\t<view class=\"action\" @tap=\"showModal\" data-target=\"bottomModal\" data-display=\"emoji\" v-if=\"!modalName\">\n\t\t\t\t\t<text class=\"cuIcon-emoji text-grey\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action\"  @tap=\"edit()\" v-if=\"modalName=='bottomModal'\">\n\t\t\t\t\t<text class=\"cuIcon-form text-grey\"></text>\n\t\t\t\t</view>\n\t\t\t\t<!-- <view class=\"action\" @tap=\"imChooseImage()\" v-if=\"!send_button\">\n\t\t\t\t\t<text class=\"cuIcon-camera text-grey\"></text>\n\t\t\t\t</view> -->\n\t\t\t\t<view class=\"action\"  @tap=\"showModal\" data-target=\"bottomModal\" data-display=\"add\" v-if=\"!send_button\">\n\t\t\t\t\t<text class=\"cuIcon-add text-grey\"></text>\n\t\t\t\t</view>\t\n\t\t\t\t\n\t\t\t\t<button class=\"cu-btn bg-green shadow\" @tap=\"send_message()\" v-if=\"send_button\">发送</button>\n\t\t\t</view>\n\t\t\t<!-- 聊天框 -->\n\t\t\t\n\t\t\t\n\t\t\t<view ref=\"emoji\" class=\"cu-bar foot\" style=\"z-index: 9999;\" :style=\"[{display:modalName=='bottomModal'?'block':'none'}]\">\n\t\t\t\t<view class=\"\" v-show=\"displayName=='emoji'\">\n\t\t\t\t\t<chat-emoji ></chat-emoji>\n\t\t\t\t</view>\n\t\t\t\t<view v-show=\"displayName=='add'\" class=\"\" style=\"height: 520rpx;overflow-y: auto;\">\n\t\t\t\t\t<view class=\"flex flex-wrap\" style=\"min-height: 520rpx;background-color: #f1f1f1;\">\n\t\t\t\t\t\t<view class=\"basis-xs  margin-xs padding-sm\" @tap=\"imChooseImage()\">\n\t\t\t\t\t\t\t<view class=\"cu-avatar xl\" style=\"\">\n\t\t\t\t\t\t\t\t<view class=\"cuIcon-camera\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- #ifdef H5 -->\n\t\t\t\t\t\t<view class=\"basis-xs  margin-xs padding-sm\" @tap=\"imChooseFile()\">\n\t\t\t\t\t\t\t<view class=\"cu-avatar xl\" style=\"\">\n\t\t\t\t\t\t\t\t<view class=\"cuIcon-file\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- #endif -->\n\t\t\t\t\t\t<view class=\"basis-xs  margin-xs padding-sm\" @tap=\"imChooseVideo()\">\n\t\t\t\t\t\t\t<view class=\"cu-avatar xl\" style=\"\">\n\t\t\t\t\t\t\t\t<view class=\"cuIcon-video\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"\" style=\"position: fixed;left: 0;top: 0;width: 100vw;height: 100vh;z-index: 1;\" @tap=\"hide_emoji_typewriting()\" v-if=\"InputBottom>0\" >\n\t\t\t\t\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 聊天框 -->\n\t\t\n\t\t\n\t\t<!-- 左边抽屉快速切换 -->\n\t\t<scroll-view  scroll-y class=\"DrawerWindow\" :class=\"modalName=='viewModal'?'show':''\" >\n\t\t\t<!-- <chat-new-group></chat-new-group> -->\n\t\t\t<view class=\"padding\">\n\t\t\t\t<scroll-view scroll-x class=\"bg-green nav text-center radius\" scroll-with-animation :scroll-left=\"scrollLeft\">\n\t\t\t\t\t<view class=\"cu-item\" :class=\"0==TabCur?'text-white cur':''\" @tap=\"tabSelect\" data-id=\"0\">\n\t\t\t\t\t\t<text class=\"cuIcon-message\"></text> 消息\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t\t<view class=\"\">\n\t\t\t\t<scroll-view scroll-x class=\"\" scroll-with-animation :scroll-left=\"scrollLeft\">\n\t\t\t\t\t<messages :isCard=\"true\" :change_type=\"2\" v-if=\"0==TabCur\"></messages>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\n\t\t</scroll-view>\n\t\t\n\t\t<view class=\"DrawerClose\" :class=\"(modalName=='viewModal'||modalName=='viewModalGroupAdd')?'show':''\" @tap=\"hideModal\">\n\t\t\t<text class=\"cuIcon-pullright\"></text>\n\t\t</view>\n\t\t<!-- 左边抽屉 -->\n\t</view>\n</template>\n\n<script>\n\timport app from '@/mixins/app.js'\n\timport im from '@/mixins/im.js'\n\timport recorder from '@/mixins/recorder.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tInputBottom: 0,\n\t\t\t\tgo:0,//todo,\n\t\t\t\ttitle:'客服',\n\t\t\t\tfocus:false\n\t\t\t};\n\t\t},\n\t\tcomputed:{\n\t\t\tsend_button(){\n\t\t\t\treturn !!this.content\n\t\t\t},\n\t\t\tplaceholder(){\n\t\t\t\tif(!this.send_button){\n\t\t\t\t\treturn '其输入内容'\n\t\t\t\t}\n\t\t\t\treturn ''\n\t\t\t},\n\t\t\tcurrent_to(){//覆盖掉im.js 的current_to\n\t\t\t\treturn {\n\t\t\t\t\tid:this.option.to?this.option.to.id:1,\n\t\t\t\t\tname: '客服：'+this.user.name,\n\t\t\t\t\tavatar: '',\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmixins:[app,im,recorder],\n\t\tmethods: {\n\t\t\tsend_message(){\n\t\t\t\tthis.im_send(1)\n\t\t\t\tthis.InputBottom = 0\n\t\t\t\tthis.modalName = null\n\t\t\t\tthis.toEmit('im-send-after-event')\n\t\t\t\treturn \n\t\t\t\n\t\t\t},\n\t\t\thide_emoji_typewriting(e){//点击屏幕 隐藏输入法等\n\t\t\t\tthis.InputBottom = 0\n\t\t\t\tif(this.modalName=='bottomModal'){//表情\n\t\t\t\t\tthis.modalName = null\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tedit(){\n\t\t\t\tthis.focus =false\n\t\t\t\tthis.modalName = null\n\t\t\t\tthis.InputBottom = 0\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.focus =true\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync hideModal(e) {//重写app 里的方法\n\t\t\t\tif(this.modalName=='bottomModal'){\n\t\t\t\t\tthis.modalName = null\n\t\t\t\t}else{\n\t\t\t\t\tthis.modalName = null\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowModal(e){\n\t\t\t\tif(e.currentTarget.dataset.target=='bottomModal'){\n\t\t\t\t\tthis.InputBottom = 0\n\t\t\t\t\t this.modalName = null\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tthis.InputBottom = 260\n\t\t\t\t\t\tthis.modalName = 'bottomModal'\n\t\t\t\t\t\tthis.displayName = e.currentTarget.dataset.display\n\t\t\t\t\t},100)\n\t\t\t\t}else{\n\t\t\t\t\tthis.modalName = e.currentTarget.dataset.target\n\t\t\t\t}\n\t\t\t},\n\t\t\n\t\t\tInputFocus(e) {\n\t\t\t\tthis.InputBottom = e.detail.height\n\t\t\t\tif(!this.InputBottom){\n\t\t\t\t\tthis.InputBottom = 1\n\t\t\t\t}else{\n\t\t\t\t\tthis.InputBottom += 10\n\t\t\t\t}\n\t\t\t\tthis.modalName = null\n\t\t\t\treturn \n\n\t\t\t},\n\t\t\tInputBlur(e) {\n\t\t\t\tthis.InputBottom = 0\n\t\t\t},\n\t\t\tdrawerWindow(e){\n\t\t\t\tthis.modalName = 'viewModalGroupAdd'\n\t\t\t},\n\t\t\tchat_content(data){//表情\n\t\t\t\tthis.content+=data\n\t\t\t},\n\t\t\tconnectWbsocket(){\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(this.im.socket_open){\n\t\t\t\t\tconsole.log('已经连接上了')\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\n\t\t\t\tuni.connectSocket({\n\t\t\t\t  url: this.im.wbsocket_url\n\t\t\t\t});\n\t\t\t\tuni.onSocketOpen( (res) =>{\n\t\t\t\t\tthis.$store.dispatch('im/socket_open',true)\n\t\t\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t\t});\n\t\t\t\tuni.onSocketError( (res) =>{\n\t\t\t\t\tclearInterval(this.im_timer)\n\t\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！',res);\n\t\t\t\t\tthis.$store.dispatch('im/socket_open',false)\n\t\t\t\t});\n\t\t\t\tuni.onSocketClose( (res) =>{\n\t\t\t\t\tthis.$store.dispatch('im/socket_open',false)\n\t\t\t\t\tconsole.log('WebSocket 已关闭！');\n\t\t\t\t\tclearInterval(this.timer)\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\tuni.onSocketMessage( (res)=> {\n\t\t\t\t\tconsole.log('收到服务器内容：' + res.data);\n\t\t\t\t\tvar data = JSON.parse(res.data)\n\t\t\t\t\tswitch(data.type){\n\t\t\t\t\t\tcase 'group'://\n\t\t\t\t\t\t\t this.put_message(data)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'login'://绑定wbsocket\n\t\t\t\t\t\t\tthis.option.client_id = data.client_id\n\t\t\t\t\t\t\tthis.$store.dispatch('im/client_id',data.client_id)\n\t\t\t\t\t\t\tthis.bindUid()\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.im_timer = setInterval(()=>{\n\t\t\t\t\tif(this.im.socket_open){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tuni.sendSocketMessage({\n\t\t\t\t\t\t\t  data: 'heart'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}catch (err) {\n\t\t\t\t\t\t\tconsole.log('no heart')\n\t\t\t\t\t\t\tconsole.log(\"err: \" + JSON.stringify(err));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('no open')\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t},5000)\n\t\t\t\t\n\t\t\t\n\t\t\t},\n\t\t\tasync im_send(type){//覆盖掉im.js 的方法,重新定义方法\n\t\t\t\tif(type){\n\t\t\t\t\tthis.message_type = 'text'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\n\t\t\t\tvar user = this.user\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\tvar params = {\n\t\t\t\t\tunique_slug:this.option.to.id+'-'+(new Date()).getTime()+'-'+this.$tool.randomString(10),\n\t\t\t\t\tfrom_id:user.id,\n\t\t\t\t\tfrom: user,\n\t\t\t\t\tto_id:this.option.to.id,\n\t\t\t\t\ttype:this.option.type,\n\t\t\t\t\tto: this.current_to,\n\t\t\t\t\tmessage_type:this.message_type,\n\t\t\t\t\tdata:{\n\t\t\t\t\t\tcontent: this.content,\n\t\t\t\t\t\tmsg: this.msg,\n\t\t\t\t\t\textra:this.extra\n\t\t\t\t\t},\n\t\t\t\t\tsended_at:this.$tool.dateFormat('Y-m-d H:M:S',new Date())\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.put_message(params)\n\t\t\t\t\n\t\t\t\tthis.content=''\n\t\t\t\tthis.msg=''\n\t\t\t\tthis.extra={}\n\t\t\t\t\n\t\t\t\tif(this.fake){//假数据\n\t\t\t\t\tvar m = getMessage()\n\t\t\t\t\tm.to.id = params.to.id //发信息到这里面\n\t\t\t\t\tm.type = params.type //\n\t\t\t\t\tm.sended_at = this.$tool.dateFormat('Y-m-d H:M:S',new Date()) //\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tthis.put_message(m)\n\t\t\t\t\t},2000)\n\t\t\t\t\treturn \n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tparams.client_id = this.im.client_id\n\t\t\t\tawait this.$store.dispatch('im/groupSend',params)\n\t\t\t},\n\t\t\tbindUid(){//覆盖掉 im.js 的bindUid\n\t\t\t\tthis.$store.dispatch('im/bindGroupUid',{'customer_service':1,client_id:this.im.client_id})\n\t\t\t},\n\t\t\tmessageChange(e){\n\t\t\t\tvar option = {}\n\t\t\t\toption.to = {id:e.to_id}\n\t\t\t\toption.type = e.type\n\t\t\t\tif(this.modalName=='DrawerModalL'){//左侧抽屉，只能通过点击右侧关掉\n\t\t\t\t}else{\n\t\t\t\t\tthis.hideModal()\n\t\t\t\t}\n\t\t\t\tthis.$store.dispatch('app/option',option)\n\t\t\t},\n\t\t},\n\t\tonUnload() {\n\t\t\tclearInterval(this.im_timer)\n\t\t\tuni.closeSocket();\n\t\t\tuni.$off('message-change', this.messageChange)\n\t\t\tuni.$off('chat-content', this.chat_content)\n\t\t\tuni.$off('im-send-event',this.imSendEvent)\n\t\t\tuni.$off('im-send-after-event',this.imSendAfterEvent)\n\t\t},\n\t\t onLoad(option) {\n\t\t\t \n\t\t\t// this.option.to = {id:option.to_id||1}\n\t\t\t\n\t\t\t// this.option.type = option.type||'group'\n\t\t\t\n\t\t\tthis.$store.dispatch('app/option',{\n\t\t\t\tto:{id:option.to_id||1},\n\t\t\t\ttype: option.type||'group'\n\t\t\t})\n\t\t\t\t\n\t\t},\n\t\tmounted() {\n\t\t\tvar user = {\n\t\t\t\tid: this.$tool.randomString(9),\n\t\t\t\tname: this.$tool.randomString(2),\n\t\t\t\tavatar: '',\n\t\t\t\tdivide_groups:[],//我的分组（类似于qq的好友）\n\t\t\t\tgroups:[],//我加的群\n\t\t\t\tfriend_groups:[],//我和好友的群（就两个人）\n\t\t\t}\n\t\t\tthis.$store.dispatch('user',user)\n\t\t\t\n\t\t\tthis.connectWbsocket()\n\t\t\tuni.$on('message-change', this.messageChange)//切换了聊天\n\t\t\tuni.$on('chat-content',this.chat_content)//表情添加到content\n\t\t\tuni.$on('im-send-event',this.imSendEvent)\n\t\t\tuni.$on('im-send-after-event',this.imSendAfterEvent)\n\t\t\treturn \n\t\t\tif(!this.user.id){//模拟一个用户\n\t\t\t\tvar user = JSON.parse(uni.getStorageSync('user')||'{}')\n\t\t\t\tif(!user.id){\n\t\t\t\t\tuser = {\n\t\t\t\t\t\tid: this.$tool.randomString(9),\n\t\t\t\t\t\tname: this.$tool.randomString(2),\n\t\t\t\t\t\tavatar: ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.setStorageSync('user',JSON.stringify(user))\n\t\t\t\tthis.$store.dispatch('user',user)\n\t\t\t}\n\t\t}\n\n\t}\n\n</script>\n\n<style>\n\t@import \"@/colorui/drawer.css\";\n\tpage{\n\t  padding-bottom: 100rpx;\n\t}\n</style>\n","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customer-service.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customer-service.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667487663345\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}