{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?2e0e","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?7aaf","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?f978","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?fd0c","uni-app:///pages/dialog/index.vue","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?8d58","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/dialog/index.vue?b864"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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CACA,yBACA,yDACA,CACA,CAbA,EAaA,sEAbA,EAcA,CAxKA,EAyKA,QAzKA,sBAyKA,CACA,yCACA,oCACA,MADA,EAEA,cAFA,IAIA,CA/KA,EAgLA,iBAhLA,6BAgLA,CAhLA,EAgLA,CACA,SACA,gCADA,EAEA,iDAFA,GAIA,CArLA,EAsLA,wBAtLA,oCAsLA,CAtLA,EAsLA,CACA,kDACA,2BACA,yEACA,CAFA,MAEA,CACA,yEACA;AACA,GA7LA;AA8LA;AACA,YADA,oBACA,KADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,EAEA,GAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,0BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OA5BA,EA4BA,IA5BA;AA6BA,KAhCA;AAiCA,mBAjCA,6BAiCA;AACA;AACA;AACA,KApCA;AAqCA,eArCA,uBAqCA,KArCA,EAqCA;AACA;AACA;AACA,KAxCA;AAyCA,UAzCA,kBAyCA,IAzCA,EAyCA;AACA;AACA,KA3CA;AA4CA,gBA5CA,wBA4CA,GA5CA,EA4CA;AACA;AACA;AACA;AACA,KAhDA;AAiDA,oBAjDA,8BAiDA;AACA;AACA,KAnDA;AAoDA,mBApDA,6BAoDA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,aAFA,EAEA,EAFA;AAGA;AACA,SAXA,EAWA,uFAXA,EAWA,MAXA,EAWA,IAXA;AAYA;AACA,KAvEA;AAwEA,eAxEA,yBAwEA;AACA;AACA;AACA;AACA;AACA,kBADA,EACA;AACA;AACA;AACA;AACA,wCADA,EACA;AACA,qCAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAHA,MAGA;AACA;AACA;AACA,mBAPA,EAOA,6BAPA;AAQA,iBAZA,EAYA;AACA;AACA;AACA,iBAfA;;AAiBA;AACA,WAtBA,EAsBA;AACA;AACA;AACA,WAzBA;;AA2BA;AACA;AACA,gBADA,EACA;AACA,4CAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA,EAGA,OAHA,EAGA,eAHA;AAIA,WALA;AAMA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA,SAjBA;;AAmBA,KA3HA;AA4HA,iBA5HA,yBA4HA,YA5HA,EA4HA,QA5HA,EA4HA;AACA;AACA;AACA,KA/HA;AAgIA,eAhIA,yBAgIA;AACA;AACA;AACA,gBADA;AAEA,uCAFA;AAGA;AACA;AACA;AACA;AACA;AACA,WAJA,EAIA,OAJA;AAKA,SATA;;AAWA,KA7IA;AA8IA,eA9IA,uBA8IA,CA9IA,EA8IA;AACA;AACA;AACA,KAjJA;AAkJA,cAlJA,wBAkJA;AACA;AACA;AACA,KArJA;AAsJA,YAtJA,oBAsJA,OAtJA,EAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,EAFA;AAGA;AACA,KAvKA;AAwKA,cAxKA,wBAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArLA;AAsLA,cAtLA,sBAsLA,QAtLA,EAsLA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA7LA;AA8LA,gBA9LA,wBA8LA,KA9LA,EA8LA;AACA;AACA;AACA;AACA,KAlMA;AAmMA,aAnMA,uBAmMA;AACA;AACA;AACA,KAtMA;AAuMA,YAvMA,oBAuMA,KAvMA,EAuMA;AACA;AACA,KAzMA;AA0MA,YA1MA,sBA0MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,EAFA;AAGA;AACA;AACA,KA/NA;AAgOA,YAhOA,oBAgOA,CAhOA,EAgOA;AACA;AACA,uEADA;AAEA,KAnOA;AAoOA,mBApOA,2BAoOA,OApOA,EAoOA;AACA;AACA;AACA;AACA,KAxOA;AAyOA,WAzOA,qBAyOA;AACA;AACA;AACA;AACA,KA7OA;AA8OA,YA9OA,sBA8OA;AACA;AACA;AACA;AACA,KAlPA;AAmPA,WAnPA,qBAmPA;AACA;AACA;AACA,KAtPA;AAuPA,UAvPA,oBAuPA;AACA;AACA;AACA,KA1PA;AA2PA,eA3PA,uBA2PA,GA3PA,EA2PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlRA;AAmRA,YAnRA,sBAmRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,EAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WARA;AASA,SAhBA;AAiBA,OApBA,MAoBA;AACA;AACA;AACA,KA3SA;AA4SA,YA5SA,oBA4SA,QA5SA,EA4SA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,iBAFA;;AAIA;AACA;AACA;AACA,6BADA;AAEA,kEAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,uBAFA;AAGA,gCAHA;AAIA,iBAJA;AAKA,mBALA;AAMA,sBANA;AAOA,mDAPA;AAQA,mCARA;AASA,qBATA;AAUA,wBAVA;AAWA,wBAXA;AAYA,+BAZA;AAaA,2BAbA;AAcA,4CAdA;AAeA,wBAfA;AAgBA,iBAhBA;AAiBA,sDAjBA;AAkBA,wBAlBA;AAmBA,kBAnBA;AAoBA,eApBA;AAqBA,yBArBA;AAsBA,iBAtBA;AAuBA,sDAvBA;;AAyBA;AACA;AACA;AACA,OAFA,EAEA,EAFA;AAGA;AACA,KAjWA;AAkWA,YAlWA,sBAkWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EAMA,QANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvXA;AAwXA,cAxXA,sBAwXA,GAxXA,EAwXA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,EAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzYA;AA0YA,cA1YA,sBA0YA,IA1YA,EA0YA,MA1YA,EA0YA;AACA;AACA,uCADA;AAEA,iBAFA;AAGA,uCAHA;AAIA;AACA,2BADA,EAJA;;;AAQA;AACA,KApZA;AAqZA,cArZA,wBAqZA;AACA;AACA;AACA;AACA;AACA,KA1ZA;AA2ZA,gBA3ZA,wBA2ZA,UA3ZA,EA2ZA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjbA;AAkbA,cAlbA,wBAkbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,EAFA;AAGA,OARA,EAQA,QARA;AASA,KA/bA;AAgcA,iBAhcA,yBAgcA,QAhcA,EAgcA;AACA;AACA;AACA,KAncA;AAocA,aApcA,uBAocA;AACA;AACA;AACA;AACA,KAxcA;AAycA,cAzcA,sBAycA,CAzcA,EAycA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzdA,EA9LA,E;;;;;;;;;;;;;AChNA;AAAA;AAAA;AAAA;AAA2iC,CAAgB,s8BAAG,EAAC,C;;;;;;;;;;;ACA/jC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/dialog/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/dialog/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=3c274cc4&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/dialog/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=3c274cc4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.face.currface = \"normal\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.face.currface = \"super\"\n    }\n\n    _vm.e2 = function($event) {\n      _vm.face.currface = \"myface\"\n    }\n\n    _vm.e3 = function($event) {\n      _vm.showmodal = \"\"\n    }\n\n    _vm.e4 = function($event) {\n      _vm.showmodal = \"\"\n      _vm.chatpopup.index = -1\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"dialogpage\">\r\n\t\t<view class=\"dialogcontent\" :style=\"'height: '+heightincress\">\r\n\t\t\t<scroll-view class=\"dialogchat solid-top\" @scrolltoupper=\"onScrolltoUpper\" scroll-y=\"true\" :scroll-into-view=\"intoviewid\">\r\n\t\t\t\t<view class=\"cu-chat\" @touchstart=\"InputBule(false)\">\r\n\t\t\t\t\t<block v-for=\"(msg,index) in data.messages\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"cu-info round\" v-if=\"msg.uid==0||msg.highmode==8\" :id=\"'message'+msg.id\">\r\n\t\t\t\t\t\t\t<rich-text :nodes=\"msg.message\" @click=\"naviTo(msg.url)\"></rich-text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view :id=\"'message'+msg.id\" v-else>\r\n\t\t\t\t\t\t\t<msglist :msgindex=\"index\" :chatevel=\"true\" @genimages=\"getChatimage\" @playaudio=\"doAudioPlay\" @dospecial=\"doSpecialAction\" @atuser=\"doAtUser\" @lotap=\"doLongPress\" :isManager=\"data.ismanager\" :userId=\"userId\" :chatimages=\"chatimages\" :dialogtype=\"type\" :chatid=\"chatid\" :message=\"msg\"></msglist>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view class=\"cu-bar input noshadow dialogoperation\" :class=\"animationstyle\">\r\n\t\t\t\t<view class=\"action\" @click=\"recordShow()\">\r\n\t\t\t\t\t<text class=\"text-grey\" style=\"margin-right: 0;\" :class=\"'cuIcon-'+(record.showing?'keyboard':'sound')\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action record flex padding-right-sm\" @longpress=\"recordStart\" :class=\"record.showing?'':'hidden'\">\r\n\t\t\t\t\t<button class=\"cu-btn radius bg-grey light flex-direction\">暂未开放</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<input class=\"solid-bottom\" adjust-position auto-blur hold-keyboard :focus=\"chatfocus\" maxlength=\"-1\" cursor-spacing=\"10\" :class=\"[InputStyle,record.showing?'hidden':'']\" @touchend.prevent=\"InputBule(true);\" :confirm-type=\"chatpostcenter?'send':''\" @confirm=\"postchatbybtn(1)\" v-model=\"postdata.message\" @blur=\"InputBule()\" @input=\"InputInput\"></input> \r\n\t\t\t\t<view class=\"action\" @click=\"faceShow(true)\">\r\n\t\t\t\t\t<text class=\"text-grey\" :class=\"'cuIcon-'+(face.showing?'keyboard':'emojifill')\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\" @click=\"toolShow()\" v-if=\"postdata.message==''\">\r\n\t\t\t\t\t<text class=\"text-grey\" :class=\"'cuIcon-roundadd'+(toolshowing?'':'fill')\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\" @touchend.prevent=\"postchatbybtn(1)\" v-else>\r\n\t\t\t\t\t<button class=\"cu-btn radius\" :class=\"'bg-'+theme.actcolor\">发送</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"recordbar padding radius\" :class=\"'bg-'+theme.actcolor\" v-if=\"record.recorder\">\r\n\t\t\t\t<view class=\"flex text-center\">\r\n\t\t\t\t\t<view class=\"padding-right-sm\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-voicefill\" :class=\"record.cancel?'':'playing'\"></text>\r\n\t\t\t\t\t\t<text v-if=\"record.cancel\">松开手取消录音</text>\r\n\t\t\t\t\t\t<text v-else>您正在说话...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-sub\">\r\n\t\t\t\t\t\t<button class=\"cu-tag light round\" :class=\"'bg-'+theme.actcolor\">上滑取消</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"face-contianer bg-gray\" :class=\"[(face.showing?'':'hidden'),animationstyle]\">\r\n\t\t\t\t<view class=\"nav bg-white\">\r\n\t\t\t\t\t<view class=\"cu-item\" :class=\"face.currface=='normal'?'text-green cur':''\" @click=\"face.currface='normal'\">经典</view>\r\n\t\t\t\t\t<view class=\"cu-item\" :class=\"face.currface=='super'?'text-green cur':''\" @click=\"face.currface='super'\">超级</view>\r\n\t\t\t\t\t<view class=\"cu-item\" :class=\"face.currface=='myface'?'text-green cur':''\" @click=\"face.currface='myface'\">我的</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view scroll-y class=\"face-faces\">\r\n\t\t\t\t\t<view class=\"face-normal face-items\" v-if=\"face.currface=='normal'\">\r\n\t\t\t\t\t\t<view class=\"grid col-8 text-center\">\r\n\t\t\t\t\t\t\t<view class=\"face-item\" @click=\"faceTochat('face_'+item.path+'_'+item.name,false)\" v-for=\"(item,index) in face.faces.normal\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<image mode=\"aspectFill\" :src=\"item.pic\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"face-super face-items\" v-else-if=\"face.currface=='super'\">\r\n\t\t\t\t\t\t<view class=\"grid col-4 padding-top\">\r\n\t\t\t\t\t\t\t<view class=\"face-item\" @click=\"faceTochat('superface_'+item,true)\" v-for=\"(item,index) in face.faces.super\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<superface :face=\"item\"></superface>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"face-mine face-items\" v-else>\r\n\t\t\t\t\t\t<view class=\"grid col-5 grid-square flex-sub padding-sm\">\r\n\t\t\t\t\t\t\t<view class=\"bg-white radius\" @click=\"myfaceadd()\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-cameraadd\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view @tap=\"myfaceTochat(index)\" @longpress.stop=\"myfacerm(index)\" class=\"bg-img\" v-for=\"(item,index) in face.faces.myface\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.resource\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"face-bar flex justify-end\" v-if=\"face.currface=='normal'\">\r\n\t\t\t\t\t<button class=\"cu-btn radius shadow margin-right-sm text-lg\" @click=\"facecancel()\" :class=\"postdata.message==''?'bg-white':'bg-green'\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-backdelete\"></text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"cu-btn radius shadow text-lg\" @click=\"postchatbybtn(0)\" :class=\"postdata.message==''?'bg-white':'bg-green'\">\r\n\t\t\t\t\t\t<text>发送</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tool-contianer bg-gray\" :class=\"[(toolshowing?'':'hidden'),animationstyle]\">\r\n\t\t\t\t<view class=\"padding-tb grid col-4 padding-lr-sm\">\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"chooseImage()\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-picfill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>图片</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"chooseVideo()\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-videofill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>视频</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\" v-if=\"data.redpack\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"naviTo('redpacket/post',{cid:chatid,type:type})\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-redpacket_fill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>红包</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!--  #ifndef MP-QQ || MP-TOUTIAO -->\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"doChooseLocation()\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-locationfill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>位置</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!--  #endif -->\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"naviTo('friend/share',{cid:chatid,type:type})\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-friendfill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>名片</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\" v-if=\"data.transfer\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"naviTo('credit/transfer',{uid:chatid})\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-sponsorfill\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>转账</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-grey text-center padding-lr-sm\" v-for=\"(item, index) in navigation.dialog\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"radius bg-white padding-tb-sm\" @click=\"naviTo((item.inner==1?'':'net:')+item.url,{cid:chatid,type:type})\" :class=\"item.extra\">\r\n\t\t\t\t\t\t\t<view class=\"text-xxxl\">\r\n\t\t\t\t\t\t\t\t<text :class=\"item.icon==''?'cuIcon-link':item.icon\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>{{item.name}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"cu-modal\" :class=\"showmodal=='groupnotice'?'show':''\" v-if=\"data.group.id>0\">\r\n\t\t\t<view class=\"cu-dialog\">\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"content\">群公告</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"padding-xl\">\r\n\t\t\t\t\t<scroll-view scroll-y class=\"group-notice\">\r\n\t\t\t\t\t\t<rich-text :nodes=\"data.group.notice\" :selectable=\"true\"></rich-text>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-center\">\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<button class=\"cu-btn\" :class=\"'bg-'+theme.actcolor\" @tap=\"showmodal=''\">我知道了</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"popupover\" :class=\"showmodal=='popupover'?'active':''\">\r\n\t\t\t<view class=\"popupover-bg\" @touchstart=\"showmodal='';chatpopup.index=-1\"></view>\r\n\t\t\t<view class=\"radius popcontainer shadow-blur\" :style=\"'bottom:'+chatpopup.bottom+'px;left:'+chatpopup.left+'px'\">\r\n\t\t\t\t<view class=\"cu-list grid text-white\" :class=\"'col-'+chatpopup.colspan\">\r\n\t\t\t\t\t<view class=\"cu-item JSClip_dialogindex\" :data-clipboard-text=\"clipboardtext\" :class=\"chatpopup.copy?'':'hidden'\" v-if=\"platform=='h5'\">\r\n\t\t\t\t\t\t<view class=\"cuIcon-copy\"></view>\r\n\t\t\t\t\t\t<text>复制</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-item\" :class=\"chatpopup.copy?'':'hidden'\" @click=\"doCopy()\" v-else>\r\n\t\t\t\t\t\t<view class=\"cuIcon-copy\"></view>\r\n\t\t\t\t\t\t<text>复制</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-item\" @click=\"doCancel()\" v-if=\"chatpopup.cancel>0\">\r\n\t\t\t\t\t\t<view class=\"cuIcon-delete\"></view>\r\n\t\t\t\t\t\t<text>{{chatpopup.cancel==1?'撤回':'删除'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-item\" @click=\"doFavor()\">\r\n\t\t\t\t\t\t<view class=\"cuIcon-favor\"></view>\r\n\t\t\t\t\t\t<text>收藏</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-item\" @click=\"doShare()\">\r\n\t\t\t\t\t\t<view class=\"cuIcon-share\"></view>\r\n\t\t\t\t\t\t<text>转发</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState} from 'vuex'\r\n\timport store from '@/store/index.js'\r\n\timport core from \"@/core.js\"\r\n\timport swasocket from \"@/swasocket.js\"\r\n\timport superface from \"@/components/util/superface.vue\"\r\n\timport msglist from \"@/components/util/msglist.vue\"\r\n\t\r\n\t//#ifndef H5\t\r\n\tconst recorderManager = uni.getRecorderManager();\r\n\t//#endif\r\n\t\r\n\texport default {\r\n\t\tcomponents: {superface,msglist},\r\n\t\tcomputed: mapState(['userId', 'userName','newMsg','Chatid', 'Chattype']),\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tchatid:0,\r\n\t\t\t\tplatform:core.platform,\r\n\t\t\t\tclipboardtext:'',\r\n\t\t\t\tchatfocus:false,\r\n\t\t\t\tchatpostcenter:core.userset.post_center==1?true:false,\r\n\t\t\t\tchatpopup:{\r\n\t\t\t\t\tindex:-1,\r\n\t\t\t\t\tbottom:0,\r\n\t\t\t\t\tleft:0,\r\n\t\t\t\t\tcolspan:4,\r\n\t\t\t\t\tcopy:false,\r\n\t\t\t\t\tcancel:0\r\n\t\t\t\t},\r\n\t\t\t\tchatimages:[],\r\n\t\t\t\tgenchating:false,\r\n\t\t\t\theightincress:'100vh',\r\n\t\t\t\tinited:false,\r\n\t\t\t\tintoviewid:\"\",\r\n\t\t\t\twxmediaid:\"\",\r\n\t\t\t\tanimationstyle:'',\r\n\t\t\t\tsitename:core.system.name,\r\n\t\t\t\tshowmodal:'',\r\n\t\t\t\tInputBottom:0,\r\n\t\t\t\tInputStyle:'',\r\n\t\t\t\ttoolshowing:false,\r\n\t\t\t\ttype:'normal',\r\n\t\t\t\ttheme:core.style,\r\n\t\t\t\tnavigation:{\r\n\t\t\t\t\tdialog:[]\r\n\t\t\t\t},\r\n\t\t\t\tpostdata:{\r\n\t\t\t\t\tmessage:\"\",\r\n\t\t\t\t\tat:0,\r\n\t\t\t\t\tvid:0,\r\n\t\t\t\t\thighmode:0,\r\n\t\t\t\t\tyuyintime:0,\r\n\t\t\t\t\tdialogtype:'normal'\r\n\t\t\t\t},\r\n\t\t\t\tface:{\r\n\t\t\t\t\tinited:false,\r\n\t\t\t\t\tfaces:{\r\n\t\t\t\t\t\tnormal:[],\r\n\t\t\t\t\t\tmyface:[],\r\n\t\t\t\t\t\tsuper:[]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshowing:false,\r\n\t\t\t\t\tcurrface:'normal'\r\n\t\t\t\t},\r\n\t\t\t\trecord:{\r\n\t\t\t\t\tshowing:false,\r\n\t\t\t\t\tstatus:false,\r\n\t\t\t\t},\r\n\t\t\t\tlangs:core.langs,\r\n\t\t\t\tColorList:{\r\n\t\t\t\t\t\"red\":\"#e54d42\",\r\n\t\t\t\t\t\"orange\":\"#f37b1d\",\r\n\t\t\t\t\t\"yellow\":\"#fbbd08\",\r\n\t\t\t\t\t\"olive\":\"#8dc63f\",\r\n\t\t\t\t\t\"green\":\"#39b54a\",\r\n\t\t\t\t\t\"cyan\":\"#1cbbb4\",\r\n\t\t\t\t\t\"blue\":\"#0081ff\",\r\n\t\t\t\t\t\"purple\":\"#6739b6\",\r\n\t\t\t\t\t\"mauve\":\"#9c26b0\",\r\n\t\t\t\t\t\"pink\":\"#e03997\",\r\n\t\t\t\t\t\"brown\":\"#a5673f\",\r\n\t\t\t\t\t\"grey\":\"#8799a3\",\r\n\t\t\t\t\t\"gray\":\"#f0f0f0\",\r\n\t\t\t\t\t\"black\":\"#333333\",\r\n\t\t\t\t\t\"white\":\"#ffffff\",\r\n\t\t\t\t\t\"limegreen\":\"#05c160\",\r\n\t\t\t\t},\r\n\t\t\t\tdata:{\r\n\t\t\t\t\ttitle:\"会话\",\r\n\t\t\t\t\tmessages:[],\r\n\t\t\t\t\tfirstid:0,\r\n\t\t\t\t\timgcompress:0,\r\n\t\t\t\t\tlastid:0,\r\n\t\t\t\t\tavatar:'',\r\n\t\t\t\t\tnewapplys:0,\r\n\t\t\t\t\tismanager:false,\r\n\t\t\t\t\tredpack:false,\r\n\t\t\t\t\ttransfer:false,\r\n\t\t\t\t\tgroup:{\r\n\t\t\t\t\t\tid:0,\r\n\t\t\t\t\t\tnotice:\"\",\r\n\t\t\t\t\t\tnoticedate:0\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshareinfo:{\r\n\t\t\t\t\t\ttitle:\"\",\r\n\t\t\t\t\t\tcover:\"\",\r\n\t\t\t\t\t\turl:\"\",\r\n\t\t\t\t\t\tdesc:\"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tif(typeof(options.cid)=='undefined' || !options.cid) return core.toast('无效的会话ID','back');\r\n\t\t\tthis.chatid = parseInt(options.cid);\r\n\t\t\tif(typeof(options.type)!='undefined' && options.type!='') this.type = options.type;\r\n\t\t\tthis.postdata.cid = this.chatid;\r\n\t\t\tthis.postdata.dialogtype = this.type;\r\n\t\t\tstore.commit('chatinit',{\r\n\t\t\t\tcid:this.chatid,\r\n\t\t\t\ttype:this.type\r\n\t\t\t});\r\n\t\t\tlet self = this;\r\n\t\t\tlet inithandel = function(){\r\n\t\t\t\tself.SocketInit(core.system.socket.type);\r\n\t\t\t\tself.initData('dialog',{cid:self.chatid,dialogtype:self.type});\r\n\t\t\t}\r\n\t\t\tif(!core.inited){\r\n\t\t\t\tcore.inithandel = inithandel;\r\n\t\t\t}else{\r\n\t\t\t\tinithandel();\r\n\t\t\t}\r\n\t\t\t//#ifndef APP-PLUS\r\n\t\t\tlet SystemInfoSync = uni.getSystemInfoSync();\r\n\t\t\tif(typeof(SystemInfoSync.windowTop)!='undefined'){\r\n\t\t\t\tthis.heightincress = \"calc(100vh - \"+SystemInfoSync.windowTop+\"px)\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.heightincress = SystemInfoSync.windowHeight+\"px\";\r\n\t\t\t}\r\n\t\t\t//#endif\r\n\t\t\t//#ifdef H5\r\n\t\t\tif(typeof(ClipboardJS)!='undefined'){\r\n\t\t\t\tlet clipboard = new ClipboardJS('.JSClip_dialogindex');\r\n\t\t\t\tclipboard.on('success', function(e) {\r\n\t\t\t\t\tcore.toast('已复制到剪切板','','success');\r\n\t\t\t\t    e.clearSelection();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tclipboard.on('error', function(e) {\r\n\t\t\t\t\tcore.toast('复制失败');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endif\r\n\t\t\tlet bgcolor = core.style.navbg.replace('gradual-','');\r\n\t\t\tbgcolor = bgcolor.replace('bg-','');\r\n\t\t\tlet fontcolor = '#ffffff';\r\n\t\t\tif(bgcolor=='white' || bgcolor=='yellow' || bgcolor=='gray') fontcolor = '#000000';\r\n\t\t\tuni.setNavigationBarColor({\r\n\t\t\t\tfrontColor:fontcolor,\r\n\t\t\t\tbackgroundColor:this.ColorList[bgcolor]\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tif(!this.inited || this.genchating) return;\r\n\t\t\tlet that = this;\r\n\t\t\tcore.get(\"dialog/redialog\",function(res){\r\n\t\t\t\tif(res.type=='success'){\r\n\t\t\t\t\tthat.data.lastid = res.message.lastmid;\r\n\t\t\t\t\tif(res.message.messages.length>0){\r\n\t\t\t\t\t\tthat.data.messages = that.data.messages.concat(res.message.messages);\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tthat.intoviewid = 'message' + that.data.lastid;\r\n\t\t\t\t\t\t},50);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(res.redirect!=''){\r\n\t\t\t\t\tcore.toast(res.message,res.redirect,res.type);\r\n\t\t\t\t}\r\n\t\t\t},{dialogtype:this.type,cid:this.chatid,lastmid:this.data.lastid});\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tswasocket.Handels.dialog = null;\r\n\t\t\tstore.commit('chatinit',{\r\n\t\t\t\tcid:0,\r\n\t\t\t\ttype:'normal'\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShareAppMessage(e){\r\n\t\t\treturn {\r\n\t\t\t\ttitle:this.data.shareinfo.title,\r\n\t\t\t\tpath:core.page(this.data.shareinfo.url),\r\n\t\t\t}\r\n\t\t},\r\n\t\tonNavigationBarButtonTap(e){\r\n\t\t\tif(e.type=='back') return core.back();\r\n\t\t\tif(this.type=='group'){\r\n\t\t\t\tcore.navito('group/detail',{gid:this.chatid,fp:'dialog'});\r\n\t\t\t}else{\r\n\t\t\t\tcore.navito('member/index',{uid:this.chatid,fp:'dialog'});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinitData(route, data={}, callback=false){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tcore.get(route,function(res){\r\n\t\t\t\t\tif(typeof(res.message)!='undefined' && typeof(res.type)!='undefined'){\r\n\t\t\t\t\t\treturn core.report(res, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.inited = true;\r\n\t\t\t\t\tthat.data = res;\r\n\t\t\t\t\tif(res.lastid>0){\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tthat.intoviewid = 'message' + res.lastid;\r\n\t\t\t\t\t\t},200);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//初始化表情\r\n\t\t\t\t\tthat.faceInit();\r\n\t\t\t\t\tif(res.group.id>0){\r\n\t\t\t\t\t\tthat.GroupNoticeInit();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcore.cachecloud('navigation',function(res){\r\n\t\t\t\t\t\tthat.navigation = res;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle:res.title\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(core.inwechat){\r\n\t\t\t\t\t\tcore.initshare(res.shareinfo.title,res.shareinfo.url,res.shareinfo.cover,res.shareinfo.desc);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(callback){\r\n\t\t\t\t\t\tcallback(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t},data);\r\n\t\t\t},\r\n\t\t\tGroupNoticeInit(){\r\n\t\t\t\tif(this.data.group.notice=='') return false;\r\n\t\t\t\tthis.showmodal = 'groupnotice';\r\n\t\t\t},\r\n\t\t\tdoAudioPlay(index){\r\n\t\t\t\tconsole.log('当前版本不支持播放语音，请联系作者购买完整版');\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\tnaviTo(page,data={}){\r\n\t\t\t\treturn core.navito(page,data);\r\n\t\t\t},\r\n\t\t\tgetChatimage(pic){\r\n\t\t\t\tif(this.chatimages.indexOf(pic)<0){\r\n\t\t\t\t\tthis.chatimages.push(pic);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdoChooseLocation(){\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\tonScrolltoUpper(){\r\n\t\t\t\tif(this.data.messages.length<20) return false;\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif(this.data.firstid==0){\r\n\t\t\t\t\tcore.toast(this.langs.msg_no_anymore);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcore.get(\"dialog\",function(res){\r\n\t\t\t\t\t\tif(typeof(res.message)!='undefined') return core.report(res);\r\n\t\t\t\t\t\tthat.data.firstid = res.firstid;\r\n\t\t\t\t\t\tif(res.count==0){\r\n\t\t\t\t\t\t\tcore.toast(that.langs.msg_no_anymore);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.data.messages = res.messages.concat(that.data.messages);\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tthat.intoviewid = 'message' + res.lastid;\r\n\t\t\t\t\t\t\t},10);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},{cid:this.chatid,dialogtype:this.type,getchat:'yes',firstid:this.data.firstid},'json',true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchooseImage(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif(core.inwechat){\r\n\t\t\t\t\tlet wx = core.jweixin;\r\n\t\t\t\t\treturn wx.chooseImage({\r\n\t\t\t\t\t\tcount: 9, // 默认9\r\n\t\t\t\t\t\tsuccess: function (ret) {\r\n\t\t\t\t\t\t\tfor (let i in ret.localIds){\r\n\t\t\t\t\t\t\t\twx.uploadImage({\r\n\t\t\t\t\t\t\t\t\tlocalId: ret.localIds[i], // 需要上传的图片的本地ID，由chooseImage接口获得\r\n\t\t\t\t\t\t\t\t\tisShowProgressTips: 1, // 默认为1，显示进度提示\r\n\t\t\t\t\t\t\t\t\tsuccess: function (result) {\r\n\t\t\t\t\t\t\t\t\t\tcore.get('attach/wxmedia',function(res){\r\n\t\t\t\t\t\t\t\t\t\t\tif (res.type=='success'){\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.postdata.highmode = 4;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.postchat(res.message.path,res.message.url);\r\n\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcore.toast(res.message,res.redirect,res.type);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},{media_id:result.serverId});\r\n\t\t\t\t\t\t\t\t\t},fail:function (res) {\r\n\t\t\t\t\t\t\t\t\t\tutil.toast(Luanguages.msg_upload_failed,'','error');\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},fail:function (res) {\r\n\t\t\t\t\t\t\tutil.toast(Luanguages.msg_operation_failed,'','error');\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 9, //默认9\r\n\t\t\t\t\tsizeType: ['compressed','original'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tlet CallBack = function(FilePath){\r\n\t\t\t\t\t\t\tcore.upload(FilePath,function(ret){\r\n\t\t\t\t\t\t\t\tthat.postdata.highmode = 4;\r\n\t\t\t\t\t\t\t\tthat.postchat(ret.path,ret.url);\r\n\t\t\t\t\t\t\t},'image','attach/upload');\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor(let i in res.tempFilePaths){\r\n\t\t\t\t\t\t\tif(that.data.imgcompress>0){\r\n\t\t\t\t\t\t\t\tthat.compressImage(res.tempFilePaths[i],CallBack);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tCallBack(res.tempFilePaths[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcompressImage(tempFilePath,callback){\r\n\t\t\t\tconsole.log('当前版本不支持压缩图片，请联系作者购买完整版');\r\n\t\t\t\treturn callback(tempFilePath);\r\n\t\t\t},\r\n\t\t\tchooseVideo(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsourceType: ['camera', 'album'],\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tcore.upload(res.tempFilePath,function(ret){\r\n\t\t\t\t\t\t\tthat.postdata.highmode = 2;\r\n\t\t\t\t\t\t\tthat.postdata.vid = ret.vid;\r\n\t\t\t\t\t\t\tthat.postchat(ret.path,ret.url);\r\n\t\t\t\t\t\t},'video');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trecordStart(e){\r\n\t\t\t\tconsole.log('当前版本不支持发送语音消息，请联系作者购买完整版');\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\trecordShow(){\r\n\t\t\t\tthis.record.showing = !this.record.showing;\r\n\t\t\t\tif(!this.record.showing) this.chatfocus = true;\r\n\t\t\t},\r\n\t\t\ttoolShow(frombtn){\r\n\t\t\t\tthis.intoviewid = '';\r\n\t\t\t\tif(this.toolshowing){\r\n\t\t\t\t\t//关闭工具栏\r\n\t\t\t\t\tthis.toolshowing = false;\r\n\t\t\t\t\tthis.animationstyle = '';\r\n\t\t\t\t\tif(frombtn) this.chatfocus = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//打开工具栏\r\n\t\t\t\t\tthis.chatfocus = false;\r\n\t\t\t\t\tthis.toolshowing = true;\r\n\t\t\t\t\tthis.face.showing = false;\r\n\t\t\t\t\tlet self = this;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tself.intoviewid = 'message' + self.data.lastid;\r\n\t\t\t\t\t},30);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfacecancel(){\r\n\t\t\t\tif(this.postdata.message=='') return false;\r\n\t\t\t\tlet message = this.postdata.message + '';\r\n\t\t\t\tlet laststr = message.substr(message.length-1,1);\r\n\t\t\t\tif(laststr==']'){\r\n\t\t\t\t\tlet regs = /\\[face_([a-zA-Z0-9]+)_([a-zA-Z0-9]+)\\]$/g;\r\n\t\t\t\t\tlet matchresult = message.search(regs);\r\n\t\t\t\t\tif(matchresult>-1){\r\n\t\t\t\t\t\tthis.postdata.message = message.replace(regs,'');\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.postdata.message = message.substr(0,message.length-1);\r\n\t\t\t},\r\n\t\t\tfaceTochat(facename,autopost=false){\r\n\t\t\t\tlet face = '['+facename+']';\r\n\t\t\t\tif(autopost){\r\n\t\t\t\t\treturn this.postchat(face);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.postdata.message += face;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmyfaceTochat(index){\r\n\t\t\t\tthis.postdata.highmode = 4;\r\n\t\t\t\tlet myface = this.face.faces.myface[index];\r\n\t\t\t\tthis.postchat(myface.attach,myface.resource);\r\n\t\t\t},\r\n\t\t\tmyfaceadd(){\r\n\t\t\t\tconsole.log('当前版本不支持发送语音消息，请联系作者购买完整版');\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\tmyfacerm(index){\r\n\t\t\t\tconsole.log('暂未开放');\r\n\t\t\t},\r\n\t\t\tfaceShow(frombtn=false){\r\n\t\t\t\tthis.intoviewid = '';\r\n\t\t\t\tif(this.record.showing) this.record.showing = false;\r\n\t\t\t\tif(this.face.showing){\r\n\t\t\t\t\t//关闭表情选择\r\n\t\t\t\t\tthis.face.showing = false;\r\n\t\t\t\t\tthis.face.temp = '';\r\n\t\t\t\t\tthis.animationstyle = '';\r\n\t\t\t\t\tif(frombtn) this.chatfocus = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//打开表情选择\r\n\t\t\t\t\tif(!this.face.inited) return this.faceInit(true);\r\n\t\t\t\t\tthis.chatfocus = false;\r\n\t\t\t\t\tthis.face.showing = true;\r\n\t\t\t\t\tthis.toolshowing = false;\r\n\t\t\t\t\tlet self = this;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tself.intoviewid = 'message' + self.data.lastid;\r\n\t\t\t\t\t},30);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tdoAtUser(e){\r\n\t\t\t\tthis.postdata.at = e.uid,\r\n\t\t\t\tthis.postdata.message = this.postdata.message + ' @' + e.nickname;\r\n\t\t\t},\r\n\t\t\tdoSpecialAction(options){\r\n\t\t\t\tif(options.type=='showredpacket'){\r\n\t\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdoShare(){\r\n\t\t\t\tif(this.chatpopup.index<0) return false;\r\n\t\t\t\tthis.showmodal = '';\r\n\t\t\t\treturn core.navito('dialog/share',{mid:this.data.messages[this.chatpopup.index].id}),this.chatpopup.index=-1;\r\n\t\t\t},\r\n\t\t\tdoCancel(){\r\n\t\t\t\tif(this.chatpopup.index<0) return false;\r\n\t\t\t\tconsole.log('当前版本不支持撤回消息，请联系作者购买完整版');\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\tdoFavor(){\r\n\t\t\t\tconsole.log('当前版本不支持收藏消息，请联系作者购买完整版');\r\n\t\t\t\treturn core.toast('暂未开放');\r\n\t\t\t},\r\n\t\t\tdoCopy(){\r\n\t\t\t\tif(this.chatpopup.index<0) return false;\r\n\t\t\t\treturn core.copy(this.clipboardtext);\r\n\t\t\t},\r\n\t\t\tdoLongPress(res){\r\n\t\t\t\tlet index = res.index;\r\n\t\t\t\tthis.chatpopup.index = index;\r\n\t\t\t\tlet popcol = 3;\r\n\t\t\t\tthis.chatpopup.copy = false;\r\n\t\t\t\tif(this.data.messages[index].highmode<=1){\r\n\t\t\t\t\tlet text = this.data.messages[index].message + '';\r\n\t\t\t\t\tthis.clipboardtext = text.replace(/<[^>]*>|/g,\"\");\r\n\t\t\t\t\tif(this.clipboardtext!=''){\r\n\t\t\t\t\t\tpopcol += 1;\r\n\t\t\t\t\t\tthis.chatpopup.copy = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this.data.messages[index].uid!=this.userId && !this.data.ismanager){\r\n\t\t\t\t\tpopcol -= 1;\r\n\t\t\t\t\tthis.chatpopup.cancel = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.chatpopup.cancel = this.data.messages[index].cancel==1 ? 1 : 2;\r\n\t\t\t\t}\r\n\t\t\t\tthis.chatpopup.colspan = popcol;\r\n\t\t\t\tthis.chatpopup.bottom = res.bottom;\r\n\t\t\t\tthis.chatpopup.left = res.left;\r\n\t\t\t\tthis.showmodal = 'popupover';\r\n\t\t\t},\r\n\t\t\tfaceInit(autoshow=false){\r\n\t\t\t\tif(!this.face.inited){\r\n\t\t\t\t\tlet cachekey = '_xfy_whotalk_face_' + this.userId;\r\n\t\t\t\t\tlet self = this;\r\n\t\t\t\t\treturn core.cacheread(cachekey,function(res){\r\n\t\t\t\t\t\tself.face.inited = true;\r\n\t\t\t\t\t\tself.face.faces = res.data;\r\n\t\t\t\t\t\tif(autoshow){\r\n\t\t\t\t\t\t\tself.faceShow();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tcore.get('face.getface',function(res){\r\n\t\t\t\t\t\t\tif(typeof(res.message)!='undefined' && typeof(res.type)!='undefined') return core.report(res);\r\n\t\t\t\t\t\t\tself.face.inited = true;\r\n\t\t\t\t\t\t\tself.face.faces = res;\r\n\t\t\t\t\t\t\tcore.cacheset(cachekey,res);\r\n\t\t\t\t\t\t\tif(autoshow){\r\n\t\t\t\t\t\t\t\tself.faceShow();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(autoshow){\r\n\t\t\t\t\treturn this.faceShow();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tposttemp(postdata,tempmsg=''){\r\n\t\t\t\tlet message = tempmsg=='' ? postdata.message : tempmsg;\r\n\t\t\t\tlet mediaid = '';\r\n\t\t\t\tlet messageid = 'temp' + this.data.messages.length;\r\n\t\t\t\tlet special = {\r\n\t\t\t\t\ttype:'normal',\r\n\t\t\t\t\tvalue:''\r\n\t\t\t\t};\r\n\t\t\t\tif(typeof(message)=='string'){\r\n\t\t\t\t\tif(message.search(/\\[superface_([a-z]+)\\]/)>-1){\r\n\t\t\t\t\t\tspecial = {\r\n\t\t\t\t\t\t\ttype:'superface',\r\n\t\t\t\t\t\t\tvalue:message.replace(/\\[superface_([a-z]+)\\]/,\"$1\")\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(postdata.highmode==5){\r\n\t\t\t\t\tspecial.value = 2;\r\n\t\t\t\t\tif(message.indexOf('wxvoice:')===0){\r\n\t\t\t\t\t\tmediaid = message.replace('wxvoice:','');\r\n\t\t\t\t\t\tmessage = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar messageslength = this.data.messages.push({\r\n\t\t\t\t\taddtime:0,\r\n\t\t\t\t\tat:postdata.at,\r\n\t\t\t\t\tavatar:this.data.avatar,\r\n\t\t\t\t\tcancel:1,\r\n\t\t\t\t\tdateline:0,\r\n\t\t\t\t\tdatetime:'刚刚',\r\n\t\t\t\t\tgid:this.type=='group'?this.chatid:0,\r\n\t\t\t\t\thighmode:postdata.highmode,\r\n\t\t\t\t\tid:messageid,\r\n\t\t\t\t\tmediaid:mediaid,\r\n\t\t\t\t\tmessage:message,\r\n\t\t\t\t\tnickname:this.userName,\r\n\t\t\t\t\topenid:this.userId,\r\n\t\t\t\t\tposter:'@/static/images/poster.jpg',\r\n\t\t\t\t\tspecial:special,\r\n\t\t\t\t\tstatus:0,\r\n\t\t\t\t\ttouid:this.type=='normal'?this.chatid:0,\r\n\t\t\t\t\tuid:this.userId,\r\n\t\t\t\t\tuniacid:0,\r\n\t\t\t\t\turl:\"\",\r\n\t\t\t\t\tvid:postdata.vid,\t\t\t\t\t\r\n\t\t\t\t\twarned:0,\r\n\t\t\t\t\tyuyintime:parseInt(postdata.yuyintime/1000)\r\n\t\t\t\t});\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tself.intoviewid = 'message' + messageid;\r\n\t\t\t\t},30);\r\n\t\t\t\treturn messageslength - 1;\r\n\t\t\t},\r\n\t\t\tpostchat(msg='',tempmsg=''){\r\n\t\t\t\tlet message = msg=='' ? this.postdata.message : msg;\r\n\t\t\t\tif(message=='') return core.toast(core.langs.msg_send_empty);\r\n\t\t\t\tlet postdata = JSON.parse(JSON.stringify(this.postdata));\r\n\t\t\t\tpostdata.message = message;\r\n\t\t\t\tlet chatpushtemp = this.posttemp(postdata,tempmsg);\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tcore.post(\"dialog/postchat\",function(res){\r\n\t\t\t\t\tif(res.status!=1){\r\n\t\t\t\t\t\tself.data.messages[chatpushtemp].status = -1;\r\n\t\t\t\t\t\treturn core.toast(res.message)\r\n\t\t\t\t\t};\r\n\t\t\t\t\tself.postresult(res,chatpushtemp);\r\n\t\t\t\t},postdata);\r\n\t\t\t\t//清空输入内容\r\n\t\t\t\tthis.postdata.message = '';\r\n\t\t\t\tthis.postdata.at = 0;\r\n\t\t\t\tthis.postdata.highmode = 0;\r\n\t\t\t\tthis.postdata.yuyintime = 0;\r\n\t\t\t\tthis.InputStyle = '';\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tpostresult(res,chatpushtemp=0){\r\n\t\t\t\t//将发送内容插入列表\r\n\t\t\t\tthis.data.messages.splice(chatpushtemp,1,res.message);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tthis.intoviewid = 'message'+res.message.id;\r\n\t\t\t\t},30);\r\n\t\t\t\tthis.data.lastid = res.message.id;\r\n\t\t\t\t//更新首页\r\n\t\t\t\tlet postevent = swasocket.PostEvent;\r\n\t\t\t\tif(typeof(postevent)=='function'){\r\n\t\t\t\t\tlet avatar = this.type=='group' ? this.data.group.pic : this.data.member.avatar;\r\n\t\t\t\t\tpostevent({cid:this.chatid,type:this.type,spct:res.spct,avatar:avatar,title:this.data.title});\r\n\t\t\t\t}\r\n\t\t\t\t//异步通知对方\r\n\t\t\t\tif(this.type=='normal'){\r\n\t\t\t\t\tcore.get(\"dialog/notice\",function(rets){},{cid:this.chatid,type:this.type,mid:res.message.id});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tSocketSend(data,touser,server=''){\r\n\t\t\t\tlet socketdata = {\r\n\t\t\t\t\t\"Method\": \"Message/SendToUsers\",\r\n\t\t\t\t\t\"Type\": 0,\r\n\t\t\t\t\t\"Message\": JSON.stringify(data),\r\n\t\t\t\t\t\"data\":{\r\n\t\t\t\t\t\t\"userIds\":touser\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tswasocket.Send(socketdata,'local',server);\r\n\t\t\t},\r\n\t\t\tSocketInit(ctype=''){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(ctype=='local' || ctype=='tim'){\r\n\t\t\t\t\tswasocket.Handels.dialog = this.SocketRecive;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tSocketRecive(socketdata){\r\n\t\t\t\tif(socketdata.type=='dialog'){\r\n\t\t\t\t\tif(socketdata.dialogid==this.chatid && socketdata.dialogtype==this.type){\r\n\t\t\t\t\t\treturn this.GetnewChat(socketdata.mid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(socketdata.type=='rmdialog'){\r\n\t\t\t\t\t//从列表中删除会话\r\n\t\t\t\t\tlet ctypeid = this.type + this.chatid;\r\n\t\t\t\t\tif(socketdata.ctypeid==ctypeid){\r\n\t\t\t\t\t\tcore.back();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(socketdata.type=='canclechat'){\r\n\t\t\t\t\tif(socketdata.dialogtype==this.type && socketdata.dialogid==this.chatid){\r\n\t\t\t\t\t\tfor(let index in this.data.messages){\r\n\t\t\t\t\t\t\tif(this.data.messages[index].id==socketdata.mid){\r\n\t\t\t\t\t\t\t\tthis.data.messages[index].highmode = 8;\r\n\t\t\t\t\t\t\t\tthis.data.messages[index].message = socketdata.spct;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tGetnewChat(mid=0){\r\n\t\t\t\tlet postdata = {mid:mid,cid:this.chatid,setread:1,dialogtype:this.type};\r\n\t\t\t\tthis.genchating = true;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\treturn core.post(\"dialog/getnewchat\",function(res){\r\n\t\t\t\t\tthat.genchating = false;\r\n\t\t\t\t\tif(res.type!='success') return core.toast(res.message);\r\n\t\t\t\t\tthat.data.messages.push(res.message);\r\n\t\t\t\t\tthat.data.lastid = res.message.id;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tthat.intoviewid = 'message' + res.message.id;\r\n\t\t\t\t\t},50)\r\n\t\t\t\t},postdata);\r\n\t\t\t},\r\n\t\t\tpostchatbybtn(fromtext){\r\n\t\t\t\tif(fromtext==1 && !this.face.showing) this.chatfocus = true;\r\n\t\t\t\tthis.postchat();\r\n\t\t\t},\r\n\t\t\tInputBule(autofocus=false) {\r\n\t\t\t\tif(this.toolshowing) return this.toolShow(autofocus);\r\n\t\t\t\tif(this.face.showing) return this.faceShow(autofocus);\r\n\t\t\t\tthis.chatfocus = autofocus;\r\n\t\t\t},\r\n\t\t\tInputInput(e){\r\n\t\t\t\tif(this.postdata.message==''){\r\n\t\t\t\t\tthis.postdata.at = 0;\r\n\t\t\t\t\tthis.InputStyle = '';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet hasenter = e.detail.value.indexOf(\"\\n\");\r\n\t\t\t\t\tif(hasenter==-1){\r\n\t\t\t\t\t\tthis.InputStyle = '';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(this.chatpostcenter){\r\n\t\t\t\t\t\t\tthis.postdata.message.replace(\"\\n\",\"\");\r\n\t\t\t\t\t\t\treturn this.postchat();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.InputStyle = 'areainput';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import \"@/colorui/animation.css\";\r\n\t\r\n\t.dialogcontent{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t.dialogchat{\r\n\t\tflex: 1;\r\n\t\toverflow: auto;\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t.dialogoperation{\r\n\t\tdisplay: flex;\r\n\t\theight: 80rpx;\r\n\t\tflex-shrink: 0;\r\n\t\twidth: 100vw;\r\n\t}\r\n\t.cu-chat{overflow: hidden;}\r\n\t.cu-chat.hasbg{background: no-repeat center; background-attachment: fixed; background-size: 30%; min-height: calc(100vh-190upx);}\r\n\t\r\n\t.group-notice{max-height: 40vh; font-size: 32upx; line-height: 50upx; text-indent: 64upx; text-align: left; white-space: pre-wrap;}\r\n\t\r\n\t.cu-bar.foot, .face-contianer, .tool-contianer{animation-duration: 0.3s;}\r\n\t.cu-bar .action.record{flex: 1;}\r\n\t.cu-bar .action.record .cu-btn{width: 100%;}\r\n\t.face-contianer{height: 260px; width: 100%; z-index: 100; overflow: hidden;}\r\n\t.face-faces{height: 430upx; position: relative;}\r\n\t.face-items{padding: 8upx;}\r\n\t.face-normal{position: relative; overflow: hidden; padding-bottom: 66upx;}\r\n\t.face-normal .face-item{padding: 10upx; overflow: hidden;}\r\n\t.face-normal .face-item image{max-width: 100%; width: 62upx; height: 62upx;}\r\n\t.face-super .face-item .superface{transform: scale(0.6); margin: -30upx;}\r\n\t.face-bar{position: absolute; right: 8upx; bottom: 8upx;}\r\n\t.tool-contianer{height: 170px; width: 100%; z-index: 100;}\r\n\t.tool-contianer .grid>view{margin-bottom: 20upx;}\r\n\t.recordbar{position: fixed; top: 50%; left: 50%; width: 460upx; margin-left: -230upx; height: 124upx; margin-top: -62upx; line-height: 62upx; z-index: 999;}\r\n\t.bottom0{bottom: 0;}\r\n\t.cu-bar.input{padding-right: 0;}\r\n\t.cu-bar.input .areainput{max-height: 148upx; line-height: 50upx; padding: 6upx 0; overflow: hidden;}\r\n\t.popcontainer{position: absolute; left: 100upx; background: #2C405A; padding: 10upx; width: 320upx;}\r\n\t.popcontainer .cu-list.grid{background: none;}\r\n\t.popcontainer .cu-list.grid>.cu-item{padding: 4upx 10upx; text-align: center;}\r\n\t.popcontainer .cu-list.grid>.cu-item [class*=cuIcon]{font-size: 36upx; margin-top: 0;}\r\n\t.popcontainer .cu-list.grid>.cu-item text{color: #FFFFFF; font-size: 24upx;}\r\n\t.popcontainer::after{width: 20upx; height: 20upx; background: #2C405A; content: ''; left: 50%; margin-left: -10upx; bottom: -8upx; position: absolute; transform: rotate(45deg); border-radius: 4upx;}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667475838126\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}