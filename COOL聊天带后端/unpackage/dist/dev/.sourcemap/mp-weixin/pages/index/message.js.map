{"version":3,"sources":["uni-app:///main.js","webpack:///D:/reference/COOL聊天带后端/pages/index/message.vue?3742","webpack:///D:/reference/COOL聊天带后端/pages/index/message.vue?b9f4","webpack:///D:/reference/COOL聊天带后端/pages/index/message.vue?8ea5","webpack:///D:/reference/COOL聊天带后端/pages/index/message.vue?b19b","uni-app:///pages/index/message.vue?vue&type=script&lang=ts&setup=true&","webpack:///D:/reference/COOL聊天带后端/pages/index/message.vue?1f46"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/index/message.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/message.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=243e1b21&scoped=true&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=ts&setup=true&\"\nexport * from \"./message.vue?vue&type=script&lang=ts&setup=true&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&id=243e1b21&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"243e1b21\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/message.vue\"\nexport default component.exports","export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=template&id=243e1b21&scoped=true&\"","var components\ntry {\n  components = {\n    clPage: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-page/cl-page\" */ \"/@/cool/ui/components/cl-page/cl-page.vue\"\n      )\n    },\n    clSticky: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-sticky/cl-sticky\" */ \"/@/cool/ui/components/cl-sticky/cl-sticky.vue\"\n      )\n    },\n    clInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-input/cl-input\" */ \"/@/cool/ui/components/cl-input/cl-input.vue\"\n      )\n    },\n    clIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-icon/cl-icon\" */ \"/@/cool/ui/components/cl-icon/cl-icon.vue\"\n      )\n    },\n    clListItem: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-list-item/cl-list-item\" */ \"/@/cool/ui/components/cl-list-item/cl-list-item.vue\"\n      )\n    },\n    clBadge: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-badge/cl-badge\" */ \"/@/cool/ui/components/cl-badge/cl-badge.vue\"\n      )\n    },\n    clAvatar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-avatar/cl-avatar\" */ \"/@/cool/ui/components/cl-avatar/cl-avatar.vue\"\n      )\n    },\n    clButton: function() {\n      return import(\n        /* webpackChunkName: \"node-modules//@/cool/ui/components/cl-button/cl-button\" */ \"/@/cool/ui/components/cl-button/cl-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.flist, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = _vm.setRefs(\"list-item__\" + item.id)\n    var m1 = _vm.setRefs(\"list-item__\" + item.id)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.menu.visible = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.menu.visible = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=script&lang=ts&setup=true&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=script&lang=ts&setup=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { onHide, onReady, onShow } from \"@dcloudio/uni-app\";\nimport dayjs from \"dayjs\";\nimport { computed, reactive, ref, watch } from \"vue\";\nimport { socket, useCool } from \"/@/cool\";\nimport { Session } from \"/@/types\";\n\nconst { service, router, ui, refs, setRefs, mitt } = useCool();\n\n// 关键字\nconst keyWord = ref<string>(\"\");\n\n// 弹出菜单\nconst menu = reactive<any>({\n\tvisible: false,\n});\n\n// 会话列表\nconst list = ref<Session.Info[]>([]);\n\n// 过滤\nconst flist = computed(() =>\n\tlist.value\n\t\t.filter((e) => e.name.toLowerCase().includes(keyWord.value.toLowerCase()))\n\t\t.map((e) => {\n\t\t\t// 处理内容\n\t\t\tswitch (e.contentType) {\n\t\t\t\tcase 0:\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst { text } = JSON.parse(String(e.content));\n\t\t\t\t\t\te.message = text;\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\te.message = \"[图片]\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\te.message = \"[表情]\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\te.message = \"[语音]\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\te.message = \"[视频]\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\te.message = \"暂无消息\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// 处理日期\n\t\t\tif (e.lastChatTime) {\n\t\t\t\tif (dayjs(e.lastChatTime).isBefore(dayjs().hour(0).minute(0).second(0))) {\n\t\t\t\t\te.date = dayjs(e.lastChatTime).format(\"YYYY-MM-DD\");\n\t\t\t\t} else {\n\t\t\t\t\te.date = dayjs(e.lastChatTime).format(\"HH:mm:ss\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\te.date = dayjs(e.createTime).format(\"HH:mm:ss\");\n\t\t\t}\n\n\t\t\t// 处理头像\n\t\t\te.avatars = (e.headimgs || \"\").split(\",\");\n\n\t\t\treturn e;\n\t\t})\n);\n\n// 刷新\nasync function refresh(params?: any) {\n\treturn service.chat.session\n\t\t.list({\n\t\t\torder: \"lastChatTime\",\n\t\t\tsort: \"desc\",\n\t\t\t...params,\n\t\t})\n\t\t.then((res) => {\n\t\t\tlist.value = res;\n\t\t});\n}\n\n// 删除会话\nfunction del(item: any, index: number) {\n\tui.showConfirm({\n\t\ttitle: \"温馨提示\",\n\t\tmessage: \"删除该聊天\",\n\t\tcallback(action) {\n\t\t\tif (action == \"confirm\") {\n\t\t\t\tservice.chat.session.delete({\n\t\t\t\t\tids: [item.id],\n\t\t\t\t});\n\n\t\t\t\tlist.value.splice(index, 1);\n\t\t\t} else {\n\t\t\t\trefs.value[`list-item__${item.id}`].restore();\n\t\t\t}\n\t\t},\n\t});\n}\n\n// 跳页面\nfunction toPage(path: string) {\n\trouter.push(path);\n}\n\n// 去聊天\nfunction toChat(item: any) {\n\trouter.push({\n\t\tpath: \"/pages/chat/index\",\n\t\tquery: {\n\t\t\t[item.type == 0 ? \"userId\" : \"groupId\"]: item.objectId,\n\t\t},\n\t});\n}\n\n// 获取未读，设置角标\nfunction unreadCount() {\n\twatch(\n\t\tlist,\n\t\t(arr) => {\n\t\t\tconst num = arr.reduce((a, b) => a + b.unreadCount, 0);\n\n\t\t\tif (num) {\n\t\t\t\tuni.setTabBarBadge({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\ttext: String(num),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.removeTabBarBadge({ index: 0 });\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tdeep: true,\n\t\t}\n\t);\n}\n\nonReady(() => {\n\tunreadCount();\n\n\t// 监听消息\n\tmitt.on(\"chat-message\", (msg) => {\n\t\tif (router.isTab(router.path)) {\n\t\t\tconst i = list.value.findIndex((e) => e.sessionId == msg.sessionId);\n\n\t\t\tif (i >= 0) {\n\t\t\t\tconst d = list.value[i];\n\n\t\t\t\td.unreadCount += 1;\n\t\t\t\td.lastChatTime = msg.createTime;\n\t\t\t\td.name = msg.user.nickName;\n\t\t\t\td.content = msg.content;\n\t\t\t\td.contentType = msg.contentType;\n\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tlist.value.splice(i, 1);\n\t\t\t\t\tlist.value.unshift(d);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (socket) {\n\t\t// 监听消息：创建会话\n\t\tsocket.on(\"sessionCreate\", () => {\n\t\t\tif (router.isTab(router.path)) {\n\t\t\t\trefresh();\n\t\t\t}\n\t\t});\n\t}\n});\n\nonShow(() => {\n\trefresh();\n});\n\nonHide(() => {\n\tmenu.visible = false;\n});\n","import mod from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=style&index=0&id=243e1b21&lang=scss&scoped=true&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=style&index=0&id=243e1b21&lang=scss&scoped=true&\""],"sourceRoot":""}