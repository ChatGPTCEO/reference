{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/auth/index.vue?a626","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/auth/index.vue?fb42","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/auth/index.vue?6f71","uni-app:///pages/auth/index.vue","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/auth/index.vue?fe29","webpack:///C:/Users/will/Documents/GitHub/reference/仿微信IM即时通讯/pages/auth/index.vue?1ed3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,2F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC6L;AAC7L,gBAAgB,2LAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAouB,CAAgB,qrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6GxvB;AACA,4E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,wCACA,8GACA,gDACA,wB,eAEA,EACA,qDADA,EAEA,IAFA,kBAEA,CACA,SACA,eADA,EAEA,8BAFA,EAGA,gCAHA,EAIA,0BAJA,EAKA,iBALA,EAMA,mBANA,EAOA,iCAPA,EAQA,kBARA,EASA,qCATA,EAUA,gCAVA,EAWA,mBAXA,EAYA,aAZA,EAaA,aAbA,EAcA,iBAdA,EAeA,eACA,eADA,EAEA,WAFA,EAGA,kBAHA,EAIA,gBAJA,EAfA,EAqBA,cArBA,EAsBA,UACA,aADA,EAEA,gBAFA,EAtBA,EA0BA,OA1BA,EA2BA,qBA3BA,EA4BA,YACA,0BADA,EAEA,YAFA,EAGA,gBAHA,EAIA,kBAJA,EAKA,cALA,EAMA,UANA,EAOA,gBAPA,EA5BA,EAqCA,uBArCA,EAsCA,wBAtCA,EAuCA,QACA,WADA,EAEA,eAFA,EAGA,iBAHA,EAIA,sBAJA,EAKA,aALA,EAMA,WANA,EAOA,eAPA,EAvCA,GAiDA,CApDA,EAqDA,MArDA,kBAqDA,OArDA,EAqDA,CACA,sFACA,oEACA,0CACA,sDACA;AACA;AACA,6BACA,CACA,sCACA,qCACA,2DACA,uCACA,wCACA,CACA,CACA,sBAEA,gBACA,kBACA,gBADA,EAEA,gCACA,oDACA,6BACA,yCACA,CACA,CAPA,IAUA,CAlFA,EAmFA,WACA,QADA,oBACA,KADA,EACA,4KACA,gBACA,yCACA,0EACA,uCACA,CAHA,CAIA;AACA,wBACA,4BACA,gBADA,IAGA,eACA,cACA,CACA,CAZA,EAYA,IAZA,EAaA,CAhBA,EAiBA,MAjBA,kBAiBA,IAjBA,EAiBA,mFACA,wCACA,CAnBA,EAoBA,eApBA,6BAoBA,CACA,uGACA,CAtBA;AAuBA,UAvBA,oBAuBA;AACA;AACA,KAzBA;AA0BA,WA1BA,qBA0BA;AACA;AACA;AACA,KA7BA;AA8BA,eA9BA,yBA8BA;AACA;AACA;AACA;AACA,gBADA,EACA;AACA,4CAFA,EAEA;AACA,6BAHA,EAGA;AACA;AACA;AACA;AACA;AACA,WAHA;AAIA,SATA;;AAWA,KA5CA;AA6CA,cA7CA,sBA6CA,CA7CA,EA6CA;AACA;AACA,KA/CA;AAgDA,YAhDA,sBAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA,SATA,EASA,GATA;AAUA,OAhBA,EAgBA,8GAhBA;AAiBA,KA5EA;AA6EA,gBA7EA,0BA6EA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAZA,EAYA,mEAZA;AAaA,OAhBA,MAgBA;AACA;AACA;AACA;AACA,KAzGA;AA0GA,SA1GA,iBA0GA,QA1GA,EA0GA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA,8BADA;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAJA,EAIA,QAJA;AAKA,aAhBA;AAiBA,gBAjBA,gBAiBA,CAjBA,EAiBA;AACA;AACA;AACA,aApBA;AAqBA;AACA;AACA,aAvBA;;;AA0BA;;;AAGA;;AAEA;AACA,SAnCA;AAoCA;AACA;AACA;AACA;AACA,SAxCA;;AA0CA,KAzJA;AA0JA,WA1JA,qBA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EAMA,IANA;AAOA,KAxLA;AAyLA,cAzLA,wBAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EAMA,IANA;AAOA,KAlNA,EAnFA,E;;;;;;;;;;;;;ACpHA;AAAA;AAAA;AAAA;AAA2iC,CAAgB,s8BAAG,EAAC,C;;;;;;;;;;;ACA/jC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/auth/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/auth/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5f254d38&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/auth/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5f254d38&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.viewpassword = !_vm.viewpassword\n    }\n\n    _vm.e1 = function($event) {\n      _vm.postdata.mode = \"code\"\n      _vm.step = 1\n    }\n\n    _vm.e2 = function($event) {\n      _vm.postdata.mode = \"password\"\n    }\n\n    _vm.e3 = function($event) {\n      _vm.action = \"register\"\n    }\n\n    _vm.e4 = function($event) {\n      _vm.action = \"login\"\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<cu-custom :isBack=\"true\">\r\n\t\t\t<block slot=\"backText\">返回</block>\r\n\t\t\t<block slot=\"content\">{{titles[action]}}</block>\r\n\t\t</cu-custom>\r\n\t\t<view>\r\n\t\t\t<view class=\"padding-xl text-center text-xxl head\" @click=\"ChooseCover\">\r\n\t\t\t\t<image class=\"round avatar margin-top-xl\" :src=\"avatar\"></image>\r\n\t\t\t\t<text class=\"cuIcon-camera text-orange\" v-if=\"action=='register'\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"padding-xl\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<view class=\"cu-form-group round\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-people margin-right-sm\"></text>\r\n\t\t\t\t\t\t<input type=\"text\" @input=\"typeusername\" :placeholder=\"'请输入'+data.registermethod+(action=='login'&&data.accountname!=''?'/'+data.accountname:'')\" name=\"username\" v-model=\"postdata.username\"></input>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top cu-form-group round\" v-if=\"data.verifycode && (action=='register' || postdata.mode=='code')\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-mail margin-right-sm\"></text>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"输入收到的验证码\" name=\"verifycode\" v-model=\"postdata.verifycode\"></input>\r\n\t\t\t\t\t\t<button @click=\"sendcode()\" :disabled=\"verifycodetext=='获取验证码'?false:true\" :class=\"verifycodetext=='获取验证码'?'bg-'+theme.actcolor:''\" class=\"cu-btn shadow round\">{{verifycodetext}}</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top cu-form-group round\" v-if=\"action=='register'\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-profile margin-right-sm\"></text>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"设置一个好听的昵称\" name=\"nickname\" v-model=\"postdata.nickname\"></input>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top cu-form-group round\" v-if=\"action=='register' || (step==1 && postdata.mode!='code')\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-lock margin-right-sm\"></text>\r\n\t\t\t\t\t\t<input type=\"text\" :focus=\"inputfocus=='password'?true:false\" :password=\"!viewpassword\" :placeholder=\"action=='login'?'请输入您的登录密码':'设置一个登录密码'\" name=\"password\" @confirm=\"dologin()\" v-model=\"postdata.password\"></input>\r\n\t\t\t\t\t\t<text @click=\"viewpassword=!viewpassword\" :class=\"viewpassword?['text-'+theme.actcolor,'cuIcon-attentionfill']:'cuIcon-attentionforbid'\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top\" v-if=\"action=='login'\">\r\n\t\t\t\t\t\t<view class=\"margin-top flex flex-direction\">\r\n\t\t\t\t\t\t\t<button class=\"cu-btn lg round\" @click=\"dologin()\" :class=\"'bg-'+theme.actcolor\">{{btnarr[step]}}</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex margin-top-xl text-center text-lg padding-lr-xl\" :style=\"'color:'+theme.link\" v-if=\"data.register || data.verifycode\">\r\n\t\t\t\t\t\t\t<view class=\"flex-sub\" :class=\"data.register?'solid-right':''\" v-if=\"data.verifycode\">\r\n\t\t\t\t\t\t\t\t<view @click=\"postdata.mode='code';step=1\" v-if=\"postdata.mode!='code'\">验证码登录</view>\r\n\t\t\t\t\t\t\t\t<view v-else @click=\"postdata.mode='password'\">密码登录</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex-sub\" v-if=\"data.register\" @click=\"action='register'\">\r\n\t\t\t\t\t\t\t\t<text>立即注册</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top\" v-else>\r\n\t\t\t\t\t\t<view class=\"margin-top flex flex-direction\">\r\n\t\t\t\t\t\t\t<button class=\"cu-btn lg round\" @click=\"doregister()\" :class=\"'bg-'+theme.actcolor\">立即注册</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex margin-top-xl text-center text-lg text-blue padding-lr-xl\">\r\n\t\t\t\t\t\t\t<view class=\"flex-sub\" @click=\"action='login'\">\r\n\t\t\t\t\t\t\t\t<text>已有账号？前往登录</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</form>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"text-center padding-top-xl margin-top-xl padding-left padding-right\" v-if=\"quicklogin\">\r\n\t\t\t\t<view class=\"text-gray text-lg\">使用第三方授权登录</view>\r\n\t\t\t\t<view class=\"flex quicklogin padding-left padding-right\">\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"quicklogins.weixin\">\r\n\t\t\t\t\t\t<button class=\"quick-weixin nobg noaf padding-0\" open-type=\"getUserInfo\" @getuserinfo=\"WxappLogin\" withCredentials=\"true\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_weixin.png\"></image>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"inwechat&&platform=='h5'\" @click=\"h5login()\">\r\n\t\t\t\t\t\t<view class=\"quick-weixin\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_weixin.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"quicklogins.weixin\" @click=\"login('weixin')\">\r\n\t\t\t\t\t\t<view class=\"quick-weixin\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_weixin.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef MP-TOUTIAO -->\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"quicklogins.toutiao\" @click=\"login('toutiao')\">\r\n\t\t\t\t\t\t<view class=\"quick-ttapp\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_ttapp.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"quicklogins.qq\" @click=\"login('qq')\">\r\n\t\t\t\t\t\t<view class=\"quick-qq\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_qqconnect.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-sub quick-item\" v-if=\"quicklogins.sinaweibo\" @click=\"login('sina')\">\r\n\t\t\t\t\t\t<view class=\"quick-sina\">\r\n\t\t\t\t\t\t\t<image mode=\"aspectFit\" class=\"png\" src=\"@/static/images/icon/auth_sina.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"padding-xl text-center text-lg\" @click=\"doViewAgreement()\" v-if=\"data.agreement!=''\">\r\n\t\t\t\t<text>{{titles[action]}}代表您已阅读并同意</text>\r\n\t\t\t\t<text :style=\"'color:'+theme.link\">《用户隐私政策》</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState} from 'vuex'\r\n\timport core from \"@/core.js\"\r\n\tvar regmobile = /^(\\+)?(86)?0?1\\d{10}$/;\r\n\tvar regemail = /^([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$/;\r\n\tvar regaccount = /^[a-zA-Z][_a-zA-Z0-9]{5,11}$/;\r\n\tvar codeInterval = null;\r\n\t\r\n\texport default {\r\n\t\tcomputed: mapState(['userId', 'hasLogin']),\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taction:'login',\r\n\t\t\t\tfromuid:core.agentid,\r\n\t\t\t\tinwechat:core.inwechat,\r\n\t\t\t\ttheme:core.style,\r\n\t\t\t\tcheckusername:\"\",\r\n\t\t\t\tredirecturl:\"home\",\r\n\t\t\t\tavatar:core.system.logo,\r\n\t\t\t\tdosubmiting:false,\r\n\t\t\t\tsystemname:core.system.name,\r\n\t\t\t\tplatform:core.platform,\r\n\t\t\t\tviewpassword:false,\r\n\t\t\t\tshowmodal:\"\",\r\n\t\t\t\twxappcode:'',\r\n\t\t\t\tquicklogin:false,\r\n\t\t\t\tquicklogins:{\r\n\t\t\t\t\t\"weixin\":false,\r\n\t\t\t\t\t\"qq\":false,\r\n\t\t\t\t\t\"sinaweibo\":false,\r\n\t\t\t\t\t\"toutiao\":false\r\n\t\t\t\t},\r\n\t\t\t\tinputfocus:'',\r\n\t\t\t\ttitles:{\r\n\t\t\t\t\t\"login\":\"登录\",\r\n\t\t\t\t\t\"register\":\"注册\"\r\n\t\t\t\t},\r\n\t\t\t\tstep:0,\r\n\t\t\t\tbtnarr:['下一步','登录'],\r\n\t\t\t\tpostdata:{\r\n\t\t\t\t\tusername:\"123456@163.com\",\r\n\t\t\t\t\tclientid:\"\",\r\n\t\t\t\t\tmode:\"password\",\r\n\t\t\t\t\tpassword:\"123456\",\r\n\t\t\t\t\tverifycode:\"\",\r\n\t\t\t\t\tavatar:\"\",\r\n\t\t\t\t\tnickname:\"光交功课\"\r\n\t\t\t\t},\r\n\t\t\t\tverifycodetext:'发送验证码',\r\n\t\t\t\tverifycodesending:false,\r\n\t\t\t\tdata:{\r\n\t\t\t\t\ttitle:\"登录\",\r\n\t\t\t\t\tregister:false,\r\n\t\t\t\t\tverifycode:false,\r\n\t\t\t\t\tregistermethod:\"少艾打扫\",\r\n\t\t\t\t\tagreement:\"\",\r\n\t\t\t\t\tauthkey:\"\",\r\n\t\t\t\t\taccountname:\"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tif(typeof(options.act)!='undefined' && options.act!='') this.action = options.act;\r\n\t\t\tif(typeof(options.rd)!='undefined') this.redirecturl = options.rd;\r\n\t\t\tif(this.hasLogin) core.logout();\r\n\t\t\tif(core.platform=='h5' && this.inwechat){\r\n\t\t\t\t//let loginurl = core.url('','mobile');\r\n\t\t\t\t//return window.location.href = loginurl;\r\n\t\t\t\tthis.quicklogin = true;\r\n\t\t\t}\r\n\t\t\tif(core.platform=='app'){\r\n\t\t\t\tlet pinf = plus.push.getClientInfo();\r\n\t\t\t\tif(typeof(pinf.clientid)!='undefined' && pinf.clientid){\r\n\t\t\t\t\tthis.postdata.clientid = pinf.clientid;\r\n\t\t\t\t\tconsole.log('获取客户端编号：'+pinf.clientid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.initData('auth');\r\n\t\t\t// #ifndef H5\r\n\t\t\tlet self = this;\r\n\t\t\tuni.getProvider({\r\n\t\t\t    service: 'oauth',\r\n\t\t\t    success: function (res) {\r\n\t\t\t\t\tif (res.provider.length>0) self.quicklogin = true;\r\n\t\t\t        for(var p in res.provider){\r\n\t\t\t\t\t\tself.quicklogins[res.provider[p]] = true;\r\n\t\t\t\t\t}\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinitData(route, data={}, callback=false){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tcore.get(route,function(res){\r\n\t\t\t\t\tif(typeof(res.message)!='undefined' && typeof(res.type)!='undefined'){\r\n\t\t\t\t\t\treturn core.report(res, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\tthat.data = res;\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle:res.title\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(callback){\r\n\t\t\t\t\t\tcallback(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t},data);\r\n\t\t\t},\r\n\t\t\tnaviTo(page,data={}){\r\n\t\t\t\treturn core.navito(page,data);\r\n\t\t\t},\r\n\t\t\tdoViewAgreement(){\r\n\t\t\t\treturn core.navito('web/index',{title:'用户隐私政策',url:encodeURIComponent(data.agreement)});\r\n\t\t\t},\r\n\t\t\tdoback(){\r\n\t\t\t\treturn core.back();\r\n\t\t\t},\r\n\t\t\th5login(){\r\n\t\t\t\tlet loginurl = core.url('auth/wxlogin','mobile');\r\n\t\t\t\twindow.location.href = loginurl;\r\n\t\t\t},\r\n\t\t\tChooseCover(){\r\n\t\t\t\tif(this.action!='register') return false;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album'], //从相册选择\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tcore.upload(res.tempFilePaths[0],function(res){\r\n\t\t\t\t\t\t\tthat.avatar = res.url;\r\n\t\t\t\t\t\t\tthat.postdata.avatar = res.path;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tWxappLogin(e){\r\n\t\t\t\treturn this.login('weixin');\r\n\t\t\t},\r\n\t\t\tsendcode(){\r\n\t\t\t\tif(this.verifycodetext!='获取验证码' || this.verifycodesending) return false;\r\n\t\t\t\tlet username = this.postdata.username;\r\n\t\t\t\tif(username==''){\r\n\t\t\t\t\treturn core.toast('请输入您的'+this.data.registermethod);\r\n\t\t\t\t}\r\n\t\t\t\tif (!username.match(regmobile) && !username.match(regemail)) {\r\n\t\t\t\t\treturn core.toast(this.data.registermethod+'格式不正确');\r\n\t\t\t\t}\r\n\t\t\t\tthis.verifycodesending = true;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\treturn core.get(\"auth/code\",function(res){\r\n\t\t\t\t\tthat.verifycodesending = false;\r\n\t\t\t\t\tif(res.type!='success') return core.report(res);\r\n\t\t\t\t\tcore.toast(res.message,'','success');\r\n\t\t\t\t\tthat.verifycodetext = '120s';\r\n\t\t\t\t\tvar n = 120;\r\n\t\t\t\t\tcodeInterval = setInterval(function(){\r\n\t\t\t\t\t\tif(n==0){\r\n\t\t\t\t\t\t\tclearInterval(codeInterval);\r\n\t\t\t\t\t\t\tthat.verifycodetext = '获取验证码';\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.verifycodetext = n+'s';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tn--\r\n\t\t\t\t\t},1e3);\r\n\t\t\t\t},{fromreg:this.action=='register'?1:0,mobile:username,sendcode:\"true\",authkey:this.data.authkey});\r\n\t\t\t},\r\n\t\t\ttypeusername(doreg=false){\r\n\t\t\t\tlet username = this.postdata.username;\r\n\t\t\t\tif (username.match(regmobile) || username.match(regemail)){\r\n\t\t\t\t\tthis.verifycodetext = '获取验证码';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.verifycodetext = '发送验证码';\r\n\t\t\t\t}\r\n\t\t\t\tif(this.action!='login') return false;\r\n\t\t\t\tif (username.match(regmobile) || username.match(regemail) || username.match(regaccount)){\r\n\t\t\t\t\tthis.checkusername = username;\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tcore.get(\"auth/getavatar\",function(res){\r\n\t\t\t\t\t\tif(res.type=='success'){\r\n\t\t\t\t\t\t\tthat.step = 1;\r\n\t\t\t\t\t\t\tthat.avatar = res.avatar;\r\n\t\t\t\t\t\t\tif(that.postdata.mode!='code') that.inputfocus = 'password';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.step = 0;\r\n\t\t\t\t\t\t\tthat.avatar = core.system.logo;\r\n\t\t\t\t\t\t\tif(doreg){\r\n\t\t\t\t\t\t\t\tthat.action='register';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},{username:username,authkey:this.data.authkey,getavatar:true})\r\n\t\t\t\t}else if(this.step==1){\r\n\t\t\t\t\tthis.step=0;\r\n\t\t\t\t\tthis.avatar = core.system.logo;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlogin(provider){\r\n\t\t\t\tif(this.dosubmiting) return false;\r\n\t\t\t\tif(!this.quicklogins[provider]) return core.toast('暂不支持该登录方式');\r\n\t\t\t\tthis.dosubmiting = true;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: provider,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tlet useroptions = {\r\n\t\t\t\t\t\t\tprovider: provider,\r\n\t\t\t\t\t\t\tsuccess: (infoRes) => {\r\n\t\t\t\t\t\t\t\tlet _provider = core.platform=='wxapp' ? 'wxapp' : provider;\r\n\t\t\t\t\t\t\t\tlet postdata = {provider:_provider,userinfo:infoRes.userInfo}\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO\r\n\t\t\t\t\t\t\t\tpostdata.code = res.code;\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tif(that.fromuid>0) postdata.fromuid = that.fromuid;\r\n\t\t\t\t\t\t\t\tpostdata.appsecret = core.apitoken;\r\n\t\t\t\t\t\t\t\tpostdata.clientid = that.postdata.clientid;\r\n\t\t\t\t\t\t\t\treturn core.post('auth/quicklogin',function(res){\r\n\t\t\t\t\t\t\t\t\tif(res.type!='success') return core.report(res);\r\n\t\t\t\t\t\t\t\t\tcore.login(res.member);\r\n\t\t\t\t\t\t\t\t\tcore.toast(res.message, that.redirecturl ,'success');\r\n\t\t\t\t\t\t\t\t},postdata);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t\treturn core.toast('登陆失败，请重试');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete:function(e){\r\n\t\t\t\t\t\t\t\tthat.dosubmiting = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tuseroptions.lang = 'zh_CN';\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef MP-TOUTIAO || MP-WEIXIN\r\n\t\t\t\t\t\tuseroptions.withCredentials = true;\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tuni.getUserInfo(useroptions);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tcore.toast('授权失败');\r\n\t\t\t\t\t\tthat.dosubmiting = false;\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdologin(){\r\n\t\t\t\tif(this.dosubmiting) return false;\r\n\t\t\t\tif(this.postdata.username=='') return core.toast('请输入您的用户名');\r\n\t\t\t\tlet username = this.postdata.username;\r\n\t\t\t\tif (!username.match(regmobile) && !username.match(regemail) && !username.match(regaccount)){\r\n\t\t\t\t\treturn core.toast('用户名格式不正确');\r\n\t\t\t\t}\r\n\t\t\t\tif(this.step==0){\r\n\t\t\t\t\tif(this.checkusername!=username){\r\n\t\t\t\t\t\treturn this.typeusername(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.action='register';\r\n\t\t\t\t}\r\n\t\t\t\tlet data = {username:username,mode:this.postdata.mode,dologin:1,authkey:this.data.authkey,clientid:this.postdata.clientid,fromuid:this.fromuid}\r\n\t\t\t\tif(this.postdata.mode=='code'){\r\n\t\t\t\t\tif(this.postdata.verifycode=='') return core.toast('验证码不能为空');\r\n\t\t\t\t\tdata.verifycode = this.postdata.verifycode;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.postdata.password=='') return core.toast('登录密码不能为空');\r\n\t\t\t\t\tdata.password = this.postdata.password;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dosubmiting = true;\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treturn core.post('auth/login',function(res){\r\n\t\t\t\t\tthat.dosubmiting = false;\r\n\t\t\t\t\tif(res.type!='success') return core.report(res);\r\n\t\t\t\t\tcore.login(res.member);\r\n\t\t\t\t\tlet redirecturl = res.redirect=='home' ? that.redirecturl : res.redirect;\r\n\t\t\t\t\tcore.toast(res.message, redirecturl ,'success');\r\n\t\t\t\t},data);\r\n\t\t\t},\r\n\t\t\tdoregister(){\r\n\t\t\t\tif(this.dosubmiting) return false;\r\n\t\t\t\tlet username = this.postdata.username;\r\n\t\t\t\tif(username=='') return core.toast('请输入您的用户名');\r\n\t\t\t\tif (!username.match(regmobile) && !username.match(regemail)){\r\n\t\t\t\t\treturn core.toast('用户名格式不正确');\r\n\t\t\t\t}\r\n\t\t\t\tif(this.postdata.password=='') return core.toast('登录密码不能为空');\r\n\t\t\t\tif(this.postdata.verifycode=='' && this.data.verifycode) return core.toast('验证码不能为空');\r\n\t\t\t\tif(this.postdata.nickname=='') return core.toast('请设置一个昵称');\r\n\t\t\t\tthis.dosubmiting = true;\r\n\t\t\t\tlet data = {username:username,doregister:1,authkey:this.data.authkey,fromuid:this.fromuid}\r\n\t\t\t\tdata.verifycode = this.postdata.verifycode;\r\n\t\t\t\tdata.password = this.postdata.password;\r\n\t\t\t\tdata.nickname = this.postdata.nickname;\r\n\t\t\t\tdata.avatar = this.postdata.avatar;\r\n\t\t\t\tdata.clientid = this.postdata.clientid;\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treturn core.post('auth/register',function(res){\r\n\t\t\t\t\tthat.dosubmiting = false;\r\n\t\t\t\t\tif(res.type!='success') return core.report(res);\r\n\t\t\t\t\tcore.login(res.member);\r\n\t\t\t\t\tlet redirecturl = res.redirect=='home' ? that.redirecturl : res.redirect;\r\n\t\t\t\t\tcore.toast(res.message, redirecturl ,'success');\r\n\t\t\t\t},data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.avatar{height: 180upx; width: 180upx; border: 10upx solid #FFFFFF;}\r\n\t.head{position: relative;}\r\n\t.head .cuIcon-camera{position: absolute; top: 230upx; left: 50%; margin-left: 56upx;}\r\n\t.agreement .cu-bar .content{width: calc(100% - 200upx);}\r\n\t.agreement-text{max-height: 40vh; font-size: 32upx; line-height: 50upx; text-indent: 64upx; text-align: left;}\r\n\t.quick-item{padding-top: 30upx;}\r\n\t.quick-item .png{width: 100upx; height: 100upx;}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667475955590\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}